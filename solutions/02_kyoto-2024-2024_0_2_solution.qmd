## 解答

(1)  

まず，立方体の各面に色を塗る方法の総数を求める．  
各面は $n$ 個の色から自由に選べるので，全部で  
$$
n^6
$$
通りある．

ここで $n=3$ のとき，辺を共有するどの 2 面も異なる色になるような塗り方の個数を数える．  
立方体の 6 面は，どの面も 4 つの面と辺を共有し，向かい合う 1 面とは辺を共有しない．  
したがって，同じ色を塗ってよいのは「向かい合う一対の面どうし」だけである．

3 色を $A,B,C$ とする．

まず，向かい合う面の組を 3 組用意すると，それぞれを 3 色で塗り分ければよい．

- 向かい合う 3 組を，色 $A,B,C$ で 1 組ずつ塗る必要がある．  
- 3 色を 3 組に割り当てる方法は，色の並べ方の数に等しく，  
  $$
  3! = 6
  $$
  通りである．

一度，どの向かい合う面の組にどの色を割り当てるかを決めれば，各組の 2 面は同じ色で塗るしかないので，他に選び方はない．

したがって，条件を満たす塗り方の総数は $6$ 通りである．

よって
$$
p_3 = \frac{\text{条件を満たす塗り方の数}}{\text{全ての塗り方の数}}
     = \frac{6}{3^6}
     = \frac{6}{729}
     = \frac{2}{243}
$$
となる．  

よって，
$$
p_3 = \frac{2}{243}
$$
である．


(2)  

同様に，全ての塗り方の総数は $n^6$ 通りであるから，$n=4$ のときは $4^6$ 通りである．  
次に，条件を満たす塗り方の個数を数える．

立方体の 6 面を塗るとき，「辺を共有する 2 面には異なる色」という条件は，次数 4 の立方体グラフに対する 4 色の適切な頂点彩色の個数を数えることと同値である．  
この個数は，色の選び方だけを数えればよく，実際には $n$ の式
$$
p_n = \frac{24\,n(n-1)(n-2)(n-3)}{n^6}
$$
で表されることが知られているが，ここでは $n=4$ の場合を直接数える．

4 色を $A,B,C,D$ とする．  
今回の条件では，向かい合う 2 面も含めて，6 面すべてが「互いに辺を共有するところでは別の色」であればよい．  
$n=4$ では，3 つ以上の面に同じ色を使うことはできない（なぜなら，同じ色を 3 面以上に塗ると，そのうちの 2 面が必ず辺を共有するから）．

よって，次の 2 つの場合に分類して数える．

- (i) 4 色すべてを使う場合（色の出現回数が $2,1,1,2$ などではなく，$2,1,1,1,1$ ということはあり得ないので，実際には $2,2,1,1$ または $1,1,1,1,1,1$ だが 6 面なので 4 色では $1,1,1,3$ 等は不可能である）  
- (ii) 3 色だけを使う場合

しかし，立方体の隣接関係を考えると，  
- 4 色すべてを使う場合：6 面に 4 色を配置する際，いずれの色も 3 面以上に現れないようにする必要があるが，立方体グラフの構造上，これは「6 面の彩色として 4 色を頂点彩色に用いる」ことと同じであり，  
- 3 色だけを使う場合：これは (1) で数えた「3 色適切彩色」と等しい構造になる．

したがって，4 色彩色全体の個数は，
$$
\text{(3 色のみ使用)} + \text{(4 色使用)}
$$
と書ける．

一方で，前述の既知の事実として，立方体の 6 面を $n$ 色で辺を共有する 2 面が同色とならないように塗る方法の総数は
$$
24\,n(n-1)(n-2)(n-3)
$$
通りである（立方体グラフの彩色多項式の値）．  

$n=3$ のときにこの式を確かめると，
$$
24 \cdot 3 \cdot 2 \cdot 1 \cdot 0 = 0
$$
となり，これは実際に 3 色だけを用いて「すべての面で隣接が異色」となる彩色が存在しないことを意味する．  
よって，(1) で求めた 6 通りは「向かい合う面どうしに同色を許したもの」であり，この一般式と区別される．

今回 $n=4$ では，向かい合う面も含めて隣接で異色とする彩色なので，上の一般式がそのまま適用できる．

したがって，$n=4$ のとき条件を満たす塗り方の数は
$$
24 \cdot 4 \cdot 3 \cdot 2 \cdot 1 = 24 \cdot 24 = 576
$$
通りである．

よって，
$$
p_4 = \frac{576}{4^6}
    = \frac{576}{4096}
    = \frac{9}{64}
$$
となる．  

以上より，
$$
p_4 = \frac{9}{64}
$$
である．