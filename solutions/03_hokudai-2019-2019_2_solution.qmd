```markdown
## 解答

$a_n=n(n+1)$ とおくと，$a_n$ と $a_{n+3}$ の最大公約数を $d_n$ とする。

まず $a_{n+3}$ を具体的に計算すると，
$$
a_{n+3}=(n+3)(n+4)=n^2+7n+12
$$
であり，
$$
a_{n+3}-a_n=(n^2+7n+12)-(n^2+n)=6n+12=6(n+2)
$$
となる。よって
$$
d_n=\gcd(a_n,a_{n+3})=\gcd\bigl(a_n,\;a_{n+3}-a_n\bigr)
=\gcd\bigl(n(n+1),\;6(n+2)\bigr)
$$
が成り立つ（最大公約数の性質 $\gcd(x,y)=\gcd(x,y-x)$ を用いた）。

ここから各小問を示す。

---

### (1) $d_n$ は偶数であることを示せ。

$n$ が偶数か奇数かで場合分けする。

- $n$ が偶数のとき：$n$ は $2$ の倍数なので，$n(n+1)$ も $2$ の倍数である。
- $n$ が奇数のとき：このとき $n+1$ は偶数なので，$n(n+1)$ は $2$ の倍数である。

したがって，いずれの場合も $a_n=n(n+1)$ は偶数である。

一方，$6(n+2)$ は $6$ の倍数なので，特に $2$ の倍数である。

$d_n=\gcd\bigl(n(n+1),\;6(n+2)\bigr)$ は，$n(n+1)$ と $6(n+2)$ の公約数であるから，偶数である $n(n+1)$ の約数である $d_n$ もまた偶数である。

ゆえに $d_n$ は偶数である。

---

### (2) $d_n$ は $8$ で割り切れないことを示せ。

背理法で示す。$d_n$ が $8$ で割り切れると仮定する。

$d_n=\gcd\bigl(n(n+1),\;6(n+2)\bigr)$ であるから，
$$
8 \mid d_n \quad\Rightarrow\quad 8 \mid n(n+1)\ \text{かつ}\ 8 \mid 6(n+2)
$$
が必要である。

まず $8\mid6(n+2)$ から考える。$8$ と $6$ の最大公約数は $2$ なので，
$$
8 \mid 6(n+2)\ \Longrightarrow\ \frac{8}{2}=4 \mid (n+2)
$$
となる。したがって
$$
n+2\equiv0\pmod{4}\quad\Rightarrow\quad n\equiv2\pmod{4}
$$
である。

ところが $n\equiv2\pmod{4}$ のとき，
$$
n\equiv2\pmod{4},\quad n+1\equiv3\pmod{4}
$$
なので，
$$
n(n+1)\equiv 2\cdot3\equiv6\equiv2\pmod{4}
$$
となり，$n(n+1)$ は $4$ で割り切れない。特に $8$ でも割り切れない。

よって $8 \mid n(n+1)$ とはなりえず，$8$ が $n(n+1)$ と $6(n+2)$ の公約数であることは不可能である。これは「$8\mid d_n$」という仮定に矛盾する。

したがって $d_n$ は $8$ で割り切れない。

---

### (3) $p$ を $5$ 以上の素数とするとき，$d_n$ は $p$ で割り切れないことを示せ。

$p$ を $5$ 以上の素数とする。背理法により，$p\mid d_n$ と仮定する。

$d_n=\gcd\bigl(n(n+1),\;6(n+2)\bigr)$ より，
$$
p\mid d_n \quad\Rightarrow\quad
p\mid n(n+1)\ \text{かつ}\ p\mid 6(n+2)
$$
が必要である。

- $p\mid n(n+1)$ から，$p$ は素数なので，$p\mid n$ または $p\mid n+1$ のどちらか一方が成り立つ（素因数分解の一意性からの基本的事実）。
- $p\mid 6(n+2)$ について，$p\ge5$ であるから，$p$ は $6$ の素因数 $2,3$ のどちらでもない。したがって $p\nmid 6$ であり，$p\mid 6(n+2)$ から
  $$
  p\mid n+2
  $$
  が従う。

以上より，$p\mid n$ または $p\mid n+1$ かつ $p\mid n+2$ が同時に成り立つ。

ここで整数 $n,n+1,n+2$ は互いに連続する3つの整数であり，このうち2つ以上が同じ素数 $p$ で割り切れることはない。実際，

- $p\mid n$ かつ $p\mid n+2$ ならば，差をとって
  $$
  p\mid (n+2)-n=2
  $$
  となるが，$p\ge5$ なので $p\mid2$ は成り立たず矛盾。
- $p\mid n+1$ かつ $p\mid n+2$ ならば，差をとって
  $$
  p\mid (n+2)-(n+1)=1
  $$
  となるが，$p$ は $1$ ではないので矛盾。

したがって，$p\mid d_n$ という仮定は成り立たない。

ゆえに，$p$ を $5$ 以上の素数とするとき，$d_n$ は $p$ で割り切れない。

---

### (4) $d_n\leqq12$ を示せ。また，$d_n=12$ となるような $n$ を1つ求めよ。

(2)，(3) の結果から，$d_n$ の素因数は $2$ または $3$ しかありえないことがわかる。すなわち，
$$
d_n=2^a3^b \quad (a,b\ge0\ \text{整数})
$$
の形で表される。

ここで $d_n\mid n(n+1)$ かつ $d_n\mid 6(n+2)$ なので，$d_n$ は $6(n+2)$ の約数でもある。$6=2\cdot3$ だから，$6(n+2)$ の $2$ の指数は $1$ か $1+$（$n+2$ が偶数か奇数かで変わる），$3$ の指数は $1$ か $1+$（$n+2$ が $3$ の倍数かどうかで変わる）である。

しかし，(2) より $d_n$ は $8=2^3$ で割り切れないから，$a\le2$ が必要である。また，(3) より $5$ 以上の素数は素因数に持たないため，$3$ については $6(n+2)$ に含まれる $3$ の指数を超えることはできない。いずれにしても，$d_n$ は $2^a3^b$ であり，$a\le2$ なので
$$
d_n\le2^2\cdot3^b
$$
である。さらに $d_n$ は $n(n+1)$ の約数であり，$n$ と $n+1$ は互いに素なので，$3^b$ はどちらか一方のみに含まれる。$6(n+2)$ にも $3$ が高べきには現れないことから，実際には $b\le1$ が成り立つ。よって
$$
d_n\le2^2\cdot3^1=12
$$
となる。

したがって $d_n\le12$ が示された。

次に，$d_n=12$ となる $n$ を1つ求める。$d_n=\gcd\bigl(n(n+1),6(n+2)\bigr)$ であるから，$12$ を公約数とする条件を調べる。

まず $12\mid6(n+2)$ となるためには
$$
\frac{12}{6}=2\mid(n+2)
$$
すなわち $n+2$ が偶数であればよい。これはどの偶数でもよく，
$$
n\equiv0\pmod{2}
$$
であることに等しい。

次に $12\mid n(n+1)$ を調べる。$12=2^2\cdot3$ なので，

- $2^2=4$ で割り切れるには，$n$ または $n+1$ が $4$ の倍数であればよい。
- $3$ で割り切れるには，$n$ または $n+1$ のどちらかが $3$ の倍数であればよい。

以上を満たす具体例を探すために，小さな $n$ を代入して計算してみる。

$n=2$ のとき：
$$
a_2=2\cdot3=6,\quad a_5=5\cdot6=30,\quad \gcd(6,30)=6
$$
であり $d_2=6$。

$n=4$ のとき：
$$
a_4=4\cdot5=20,\quad a_7=7\cdot8=56,\quad \gcd(20,56)=4
$$
であり $d_4=4$。

$n=6$ のとき：
$$
a_6=6\cdot7=42,\quad a_9=9\cdot10=90,\quad \gcd(42,90)=6
$$
であり $d_6=6$。

$n=8$ のとき：
$$
a_8=8\cdot9=72,\quad a_{11}=11\cdot12=132.
$$
このとき
$$
\gcd(72,132)
=\gcd(72,\ 132-72)
=\gcd(72,60)
=\gcd(12,60)
=12
$$
となるから，$d_8=12$ である。

よって $d_n=12$ となる $n$ の一例として，$n=8$ が求める値である。

---

以上より，(1)〜(4) がすべて示された。
```