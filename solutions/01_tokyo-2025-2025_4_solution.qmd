## 解答

(1)  

$f_a(n)$ が平方数であるとする。すなわち，ある整数 $m \ge 0$ が存在して
$$
f_a(n)=n^2+n-a=m^2
$$
とおける。

この式を変形すると
$$
n^2+n-a=m^2
$$
より
$$
4n^2+4n-4a=4m^2
$$
となるので，左辺に $1$ を加えて
$$
4n^2+4n+1-4a=4m^2+1
$$
すなわち
$$
(2n+1)^2-4a=4m^2+1
$$
が得られる。したがって
$$
(2n+1)^2-(2m)^2=4a+1
$$
であり，平方数の差の形から
$$
(2n+1-2m)(2n+1+2m)=4a+1
$$
が成り立つ。

ここで $2n+1-2m$ と $2n+1+2m$ はともに奇数であるから，その積 $4a+1$ も奇数であり，これは $4a+1$ の定義から自明に整合している。

また $m^2=n^2+n-a \ge 0$ より
$$
n^2+n-a \ge 0
$$
すなわち
$$
n(n+1)\ge a
$$
が成り立つ。ここで $n$ は正の整数なので，$n \ge 1$ より $n+1>n$ であり，よって
$$
n(n+1) > n^2
$$
である。したがって
$$
n^2 < n(n+1)
$$
が成り立つので，これと $n(n+1)\ge a$ を比べて
$$
n^2 < a
$$
を得る。よって $n^2<a$ から
$$
n<\sqrt{a}
$$
が従う。

一方，$n$ は正の整数なので，$n\le a$ が成り立つかどうかを検討する。$a\ge 1$ であるから
$$
\sqrt{a}\le a
$$
が成り立つ（両辺を 2 乗すれば $a\le a^2$ となり，$a\ge 1$ なので真）。これと $n<\sqrt{a}$ を合わせると
$$
n<\sqrt{a}\le a
$$
であるから
$$
n\le a
$$
が従う。

よって，$f_a(n)$ が平方数であるならば $n\le a$ であることが示された。

\medskip

(2)  

$f_a(n)$ が平方数となる正の整数 $n$ の個数を $N_a$ とする。次の 2 条件

(i) $N_a=1$ である。  
(ii) $4a+1$ は素数である。

が同値であることを示す。

\medskip

まず準備として，(1) と同様に $f_a(n)=m^2$ とおくと
$$
(2n+1)^2-(2m)^2=4a+1
$$
から
$$
(2n+1-2m)(2n+1+2m)=4a+1
$$
が成り立つことを用いる。ここで
$$
x=2n+1-2m,\quad y=2n+1+2m
$$
とおくと，$x,y$ はともに正の奇数で
$$
xy=4a+1
$$
を満たす。逆に $4a+1$ の正の奇数の因数分解
$$
xy=4a+1\quad(x,y\ \text{正の奇数，かつ}\ x\le y)
$$
が与えられれば
$$
2n+1=\frac{x+y}{2},\quad 2m=\frac{y-x}{2}
$$
とおけるので
$$
n=\frac{x+y-2}{4},\quad m=\frac{y-x}{4}
$$
と $n,m$ は整数に定まり，この $n$ に対して $f_a(n)=m^2$ となる。したがって，

「$f_a(n)$ が平方数となる正の整数 $n$」と「$4a+1$ の正の奇数因数分解 $xy=4a+1$」は 1 対 1 に対応する。

この対応を用いて (i) と (ii) の同値性を示す。

\medskip

( ii $\Rightarrow$ i )  

$4a+1$ が素数であると仮定する。このとき $4a+1$ の正の因数は $1$ と $4a+1$ のみであり，いずれも奇数であるから，$xy=4a+1$ を満たす正の奇数 $(x,y)$ は
$$
(x,y)=(1,4a+1)
$$
ただ 1 通りである。

上の対応により，$f_a(n)$ が平方数となる正の整数 $n$ はこの 1 通りの因数分解に対応する 1 個だけである。よって $N_a=1$ が成り立つ。

\medskip

( i $\Rightarrow$ ii )  

逆に $N_a=1$ であると仮定する。すると $f_a(n)$ が平方数となる正の整数 $n$ はちょうど 1 個だけ存在する。上で述べた 1 対 1 対応より，$4a+1$ の正の奇数因数分解 $xy=4a+1$ も 1 通りしか存在しないことになる。

ところで $4a+1$ は奇数なので，常に
$$
4a+1=1\cdot(4a+1)
$$
という正の奇数因数分解をもつ。したがって，他に因数分解が存在しないということは，$1$ と $4a+1$ 以外に $4a+1$ の正の因数が存在しないことを意味する。これは $4a+1$ が素数であることと同値である。

よって $4a+1$ は素数である。

\medskip

以上より，(i) と (ii) は互いに同値である。