## 解答

正八角形 $A_1A_2\cdots A_8$ の頂点はすべて円周上にあり，隣り合う頂点間の中心角は $45^\circ$ であるとする。

---

### (1)

頂点 3 個でできる三角形の総数は  
$$
{}_8\mathrm C_3=56
$$
である。

円に内接する三角形が直角三角形となる必要十分条件は，「その弧をはさむ両端の頂点が直径の両端にあたること」（内接角の定理）である。  
正八角形の頂点を通る円の直径は，頂点同士が $180^\circ$，すなわち 4 頂点分離れた組である。

直径の両端となる頂点の組は
$$
(A_1,A_5),(A_2,A_6),(A_3,A_7),(A_4,A_8)
$$
の $4$ 組である。各直径に対して，残りの 6 頂点から 1 点を選ぶと，その 3 点は直角三角形をなす。よって

- 各直径につき，直角三角形は $6$ 個
- 直径は $4$ 本

だから，直角三角形の総数は
$$
4\times 6 = 24
$$
である。

**答**　$24$ 個

---

### (2)

まず，三角形の総数から，直角三角形と二等辺三角形を除けばよい。ただし，直角二等辺三角形は二重に数えないように注意する。

#### 1. 二等辺三角形の個数

正八角形の頂点は円周上に等間隔にあるので，二等辺三角形になるのは「頂点番号の差」が対称になる組である。便宜上，頂点を円周上で順に 0,1,2,\dots,7 と番号付けし，頂点 $i$ と $j$ の間の最小の頂点数差を
$$
d(i,j)\in\{1,2,3,4\}
$$
とする（$4$ は向かい合う頂点）。

三角形 $\{i,j,k\}$ が二等辺であるとは，
$$
d(i,j),d(j,k),d(k,i)
$$
のうち同じ値が 2 個以上あることに対応する。対称性より，任意の頂点を「頂点 0」とみなして数えればよい。

#### 1-1. 一辺を「底辺」とみる場合

底辺の長さ（円周上の差）を $s$，両脚の長さを $t$ とする。  
正八角形では $s,t\in\{1,2,3,4\}$ であり，三角形になるには三角不等式
$$
s < t+t
$$
が必要である（底辺の内接角に対して脚側の弧が 2 本分あるイメージ）。

- $s=1$ のとき，$t=1,2,3,4$ はすべて $1<2t$ を満たす
- $s=2$ のとき，$t=1,2,3,4$ はすべて $2<2t$ を満たす
- $s=3$ のとき，$t=2,3,4$ が $3<2t$ を満たす（$t=1$ は $3<2$ で不可）
- $s=4$ のとき，$t=3,4$ が $4<2t$ を満たす（$t=1,2$ は不可）

底辺の端点を $(0,s)$ と固定する。残りの頂点のうち，頂点 0 から距離 $t$ のものは 2 つ（$+t,-t$）あるが，そのうち一方は底辺の端点 $s$ そのものと一致しないように選ぶ必要がある。具体的に整理すると：

- $t\neq s$ のとき：脚頂点は 2 通り
- $t=s$ のとき：脚頂点は 1 通り（他方は底辺の端点と一致する）

上の条件を組み合わせて，頂点 0 を固定したときにできる二等辺三角形の個数（底辺・頂点 0 に関するもの）を数えると，

- $s=1$:  
  - $t=1$（二等辺かつ等辺）…1 通り  
  - $t=2,3,4$ …各 2 通り  
  合計 $1+2+2+2=7$
- $s=2$:  
  - $t=1,3,4$ …各 2 通り  
  - $t=2$ …1 通り  
  合計 $2+1+2+2=7$
- $s=3$:  
  - $t=2,4$ …各 2 通り  
  - $t=3$ …1 通り  
  合計 $2+2+1=5$
- $s=4$:  
  - $t=3$ …2 通り  
  - $t=4$ …1 通り  
  合計 $2+1=3$

よって，頂点 0 を含む二等辺三角形は
$$
7+7+5+3 = 22\ \text{個}
$$
である。

正八角形の対称性より，各二等辺三角形はちょうど 3 個の頂点をもち，そのいずれかを「頂点 0」として数えられているので，全体の二等辺三角形の個数は
$$
\frac{8\times 22}{3} = \frac{176}{3}
$$
となり整数にならない。この方法は二等辺三角形の種類によって重複度が異なるため，そのままでは用いにくい。  
そこで方針を変え，具体的な頂点の取り方で分類して数え上げる。

#### 1-2. 具体的な組合せによる分類

頂点を $0,1,\dots,7$ とし，回転対称性を用いて，三角形の一辺を $\{0,a\}$ とおき，
第三頂点を $b$ とする。三角形 $\{0,a,b\}$ が二等辺である条件は
$$
d(0,a)=d(a,b)\quad\text{または}\quad d(a,b)=d(b,0)\quad\text{または}\quad d(b,0)=d(0,a)
$$
である。これを $a=1,2,3,4$ ごとに総当たりで調べると煩雑だが，実際には次のような「弧の長さのパターン」で分類できる。

8 個の頂点を円周上で 3 つに区切ると，区切りごとの弧の頂点数（順に $x,y,z$）は
$$
x+y+z=8,\quad x,y,z\ge 1
$$
を満たす。三角形の 3 辺の円弧上の長さは $\{x,y,z\}$ であり，これが二等辺となるためには，3 つのうち 2 つが等しい必要がある。

よって，$\{x,y,z\}$ の形は
- $\{1,1,6\}$
- $\{1,2,5\}$
- $\{1,3,4\}$
- $\{2,2,4\}$
- $\{2,3,3\}$
のうち，2 つが等しい形を選ぶ。すなわち

1. $\{1,1,6\}$：$1=1$
2. $\{1,3,4\}$：等しいものなし → 二等辺でない
3. $\{1,2,5\}$：等しいものなし → 二等辺でない
4. $\{2,2,4\}$：$2=2$
5. $\{2,3,3\}$：$3=3$

この 3 つの型に対し，それぞれ異なる順列と回転の個数を考える。

- 型 $\{1,1,6\}$  
  同じ値 1 が 2 つあるので，異なる順列は  
  $$
  \frac{3!}{2!}=3\ \text{通り}
  $$
  一方，この分割は円周上で回転させても同じ形なので，始点の取り方は 8 通り。したがって  
  $$
  3\times 8 = 24\ \text{通り}
  $$
  の三角形。

- 型 $\{2,2,4\}$  
  同様に異なる順列は 3 通り，回転の自由度は 8 通りで  
  $$
  3\times 8 = 24\ \text{通り}
  $$

- 型 $\{2,3,3\}$  
  同じ値 3 が 2 つあるので，異なる順列は 3 通り，回転は 8 通りで  
  $$
  3\times 8 = 24\ \text{通り}
  $$

よって，二等辺三角形の総数は
$$
24+24+24 = 72
$$
となる。しかし，これは 8 頂点の「弧の分割順序」を数えており，各三角形を 3 回ずつ（頂点の選び方の始点を変えて）数えていることに注意する必要がある。

実際，ある三角形の 3 頂点を $P,Q,R$ とすると，円周上の区切りの始点を $P$ にとった場合，$Q$ にとった場合，$R$ にとった場合の 3 通りがそれぞれカウントに含まれている。よって一つの三角形は 3 回数えられているので，真の個数は
$$
\frac{72}{3}=24
$$
である。

したがって，二等辺三角形の個数は $24$ 個である。

#### 2. 直角二等辺三角形の個数

(1) で求めた直角三角形 24 個のうち，どれが二等辺であるかを確認する。

直角三角形は「直径の両端の 2 頂点と，その他の 1 頂点」でできる。各直径について残り 6 頂点のうち，直径の中点に関する対称な位置にある 2 頂点を選ぶと，脚の長さが等しくなる直角二等辺三角形ができる。

たとえば，直径を $A_1A_5$ とすると，三角形 $A_1A_5A_3$ と $A_1A_5A_7$ などが直角二等辺三角形である。各直径につき，直角二等辺三角形は 2 個存在し，直径は 4 本あるので，
$$
4\times 2 = 8
$$
より，直角二等辺三角形は $8$ 個である。

#### 3. 求める三角形の個数

- 直角三角形：24 個
- 二等辺三角形：24 個
- 直角二等辺三角形：8 個（上の両方に含まれる）

よって，「直角でも二等辺でもない三角形」の個数は包除原理より
$$
56 - (24+24-8)
= 56 - 40
= 16
$$
となる。

**答**　$16$ 個

---

### (3)

4 個の頂点を結んでできる四角形について，「その 4 頂点から 3 点を選ぶと，必ず直角三角形を作れる」という条件ではない。  
問題文の条件 (＊) は

> 四角形の 4 個の頂点から 3 点を選んで直角三角形を作れる。

という意味なので，「4 頂点のうち少なくとも 1 組の 3 点が直角三角形になる」ことを表す。

よって，条件 (＊) を満たす四角形の個数は
$$
\text{全四角形の個数} - \text{（どの 3 点も直角三角形にならない四角形の個数）}
$$
で求められる。

#### 1. 四角形の総数

頂点 8 個から 4 個選ぶので
$$
{}_8\mathrm C_4 = 70
$$
個。

#### 2. どの 3 点も直角三角形にならない四角形

(1) より，「直角三角形になる 3 頂点組」はすべて「ある直径の両端と，その他の 1 頂点」の形であり，そのような組は 24 個であった。

四角形 $B_1B_2B_3B_4$ が「どの 3 点も直角三角形にならない」とは，$\{B_1,B_2,B_3,B_4\}$ のどの 3 点も「上記 24 個の直角三角形の頂点集合」に含まれないことを意味する。  
逆に言うと，四角形の 4 頂点に直径の両端が同時に含まれてしまうと，残りの 2 頂点のいずれかを加えて直角三角形ができてしまう。

したがって，「どの 3 点も直角三角形でない」四角形とは，「どの直径の両端も同時に含まない 4 頂点の選び方」である。

正八角形の直径の両端の組は
$$
\{1,5\},\{2,6\},\{3,7\},\{4,8\}
$$
の 4 組である。これら 4 組から，両端を同時に含まないように 4 頂点を選ぶ。

これは，「4 組のペアから，高々一方の頂点だけを選ぶ」という状況であり，各ペアごとに

- 何も選ばない … 1 通り
- 一方だけ選ぶ … 2 通り

の計 3 通りの選び方がある。よって，制限なしに選ぶと全体では
$$
3^4=81
$$
通りだが，この中から「ちょうど 4 頂点」を選ぶ場合のみを取り出す。

1 つのペアから 0,1 頂点しか選べないので，4 頂点選ぶには，4 つのペアすべてから 1 頂点ずつ選ぶしかない。したがって，4 頂点を選ぶ場合の数は
$$
2^4 = 16
$$
通りである。

この 16 通りが「どの直径の両端も同時に含まない 4 頂点の選び方」であり，したがって「どの 3 点も直角三角形にならない四角形」の個数である。

#### 3. 条件 (＊) を満たす四角形の個数

求める個数は
$$
70 - 16 = 54
$$
である。

**答**　$54$ 個