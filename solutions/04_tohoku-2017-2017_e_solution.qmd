## 解答

(1)  
条件は  
$$2x+2y+z=n$$  
である。まず $z$ について解くと  
$$z=n-2x-2y$$  
となる。$x,y,z$ は負でない整数なので，$z \ge 0$ より  
$$n-2x-2y \ge 0 \quad \Longleftrightarrow \quad 2x+2y \le n$$  
が必要十分である。よって，負でない整数 $(x,y)$ が条件  
$$2x+2y \le n$$  
を満たすとき，$z$ は自動的に $z=n-2x-2y$ と一意に定まり，そのような $(x,y,z)$ の個数は，そのまま条件を満たす $(x,y)$ の個数に等しい。

したがって，$n=4$ と $n=5$ について  
$$2x+2y \le n$$  
を満たす負でない整数 $(x,y)$ の個数を調べればよい。

$2x+2y \le n$ を $x+y$ について書き直すと  
$$x+y \le \frac{n}{2}$$  
となる。

### $n=4$ のとき  
$$x+y \le \frac{4}{2}=2$$  
を満たす負でない整数 $(x,y)$ を数える。

和 $x+y=k$ ごとに調べると，

- $k=0$ のとき：$(0,0)$ の 1 組  
- $k=1$ のとき：$(0,1),(1,0)$ の 2 組  
- $k=2$ のとき：$(0,2),(1,1),(2,0)$ の 3 組  

よって $x+y \le 2$ を満たす $(x,y)$ の組は  
$$1+2+3=6$$  
通りである。

したがって $n=4$ のとき，$(x,y,z)$ の組の総数は $6$ 通り。

### $n=5$ のとき  
$$x+y \le \frac{5}{2}=2.5$$  
より，$x+y$ は整数なので  
$$x+y \le 2$$  
となる。これは $n=4$ のときと同じ条件であるから，$(x,y)$ の組の個数も同じく  
$$1+2+3=6$$  
通りである。

したがって $n=5$ のときも，$(x,y,z)$ の組の総数は $6$ 通り。

以上より，
- $n=4$ のとき：$6$ 通り  
- $n=5$ のとき：$6$ 通り  

である。

---

(2)  
一般の非負整数 $n$ について，条件  
$$2x+2y+z=n$$  
を満たす負でない整数 $(x,y,z)$ の個数を $n$ を用いて表す。

(1) と同様に，$z=n-2x-2y \ge 0$ より  
$$2x+2y \le n \quad \Longleftrightarrow \quad x+y \le \frac{n}{2}$$  
となる。$x,y$ は負でない整数である。

ここで $n$ の偶奇で場合分けする。

### $n$ が偶数のとき  
$n=2m$ とおくと，条件は  
$$x+y \le \frac{2m}{2}=m$$  
となる。和 $x+y=k$ ごとに組 $(x,y)$ の個数を数えると，$k$ を $0$ から $m$ まで動かして

- $x+y=k$ を満たす負でない整数 $(x,y)$ の個数は $k+1$ 個

なので，求める総数は  
$$\sum_{k=0}^{m} (k+1) = 1+2+\cdots+(m+1)$$  
である。等差数列の和の公式より  
$$1+2+\cdots+(m+1) = \frac{(m+1)(m+2)}{2}$$  
となる。したがって

$$
n=2m \ \text{のときの個数} \;=\; \frac{(m+1)(m+2)}{2}
$$

である。$m=\dfrac{n}{2}$ を代入して $n$ で表すと，

$$
\frac{\left(\frac{n}{2}+1\right)\left(\frac{n}{2}+2\right)}{2}
= \frac{1}{2}\cdot\frac{(n+2)(n+4)}{4}
= \frac{(n+2)(n+4)}{8}
$$

となる。よって，$n$ が偶数のときの答えは  
$$\frac{(n+2)(n+4)}{8}$$  
である。

### $n$ が奇数のとき  
$n=2m+1$ とおくと，条件は  
$$x+y \le \frac{2m+1}{2}=m+\frac12$$  
であり，$x+y$ は整数なので  
$$x+y \le m$$  
となる。したがって，$n=2m$ のときと同じ条件になり，(2) の偶数の場合と同様の数え上げで，個数は  
$$\sum_{k=0}^{m} (k+1) = 1+2+\cdots+(m+1)=\frac{(m+1)(m+2)}{2}$$  
となる。

ここで $m=\dfrac{n-1}{2}$ を代入して $n$ で表すと，

$$
\frac{\left(\frac{n-1}{2}+1\right)\left(\frac{n-1}{2}+2\right)}{2}
= \frac{\left(\frac{n+1}{2}\right)\left(\frac{n+3}{2}\right)}{2}
= \frac{(n+1)(n+3)}{8}
$$

となる。よって，$n$ が奇数のときの答えは  
$$\frac{(n+1)(n+3)}{8}$$  
である。

以上より，求める個数は $n$ の偶奇によって

$$
\begin{cases}
\dfrac{(n+2)(n+4)}{8} & (n \text{ が偶数})\\[4mm]
\dfrac{(n+1)(n+3)}{8} & (n \text{ が奇数})
\end{cases}
$$

と表される。

---

(3)  
$$2x+2y+z \le n$$  
を満たす負でない整数 $(x,y,z)$ の個数を求める。

不等式を等式に直すため，新たな非負整数 $t$ を導入し，

$$2x+2y+z+t=n$$

とおく。ここで $t$ は  
$$t = n-(2x+2y+z) \ge 0$$  
と定まるので，$2x+2y+z \le n$ を満たす $(x,y,z)$ と，  
$$2x+2y+z+t=n$$  
を満たす $(x,y,z,t)$ は 1 対 1 に対応する（変数 $t$ を加えた「余り」の導入）。

したがって，求める個数は  
$$2x+2y+z+t=n$$  
を満たす負でない整数 $x,y,z,t$ の組の個数に等しい。

ここで $x,y$ は係数 2 をもつが，$z,t$ は係数 1 であるので，(2) と同様に $x,y$ だけをまとめて考える。

$2x+2y+z+t=n$ を  
$$2x+2y = k \quad (0 \le k \le n,\ k\ \text{は偶数})$$  
とおくと，残りは  
$$z+t = n-k$$  
である。このとき，

- $2x+2y=k$ を満たす非負整数 $(x,y)$ の個数  
- $z+t = n-k$ を満たす非負整数 $(z,t)$ の個数

の積を $k$ について和を取ればよい。

しかし，ここで別の見方をすると，$z,t$ を先にまとめて  
$$w = z+t$$  
とおくことで，$w$ は $0 \le w \le n$ の任意の整数であり，方程式は  
$$2x+2y+w=n$$  
すなわち  
$$2x+2y = n-w$$  
となる。

$n-w$ が偶数でなければ解は存在しないので，$w$ は $n$ と同じ偶奇である整数に限られるが，この場合分けを行う代わりに，(2) を利用して，一気に数えることができる。

固定した $w$ ごとに，  
$$2x+2y+z = n-w \quad (z:=0\ \text{と見なせば，(2) と同じ形})$$  
となるので，(2) の結果を用いて，「右辺が $n-w$ の場合の $(x,y,z)$ の個数」を足し合わせればよい，と考えることもできる。

より直接的な方法としては，  
$$2x+2y+z \le n$$  
を満たす $(x,y,z)$ の個数は，$2x+2y+z=m$ を満たす個数を $m=0$ から $n$ まで足し合わせたものに等しい，と見ることである。すなわち

$$
\sum_{m=0}^{n} \left[2x+2y+z=m \ \text{を満たす $(x,y,z)$ の個数}\right]
$$

である。この角括弧内は (2) で求めた式に $n$ の代わりに $m$ を代入したものである。

(2) より，$2x+2y+z=m$ を満たす個数を $f(m)$ とすると，

$$
f(m)=
\begin{cases}
\dfrac{(m+2)(m+4)}{8} & (m \text{ が偶数})\\[4mm]
\dfrac{(m+1)(m+3)}{8} & (m \text{ が奇数})
\end{cases}
$$

である。したがって求める個数は

$$
\sum_{m=0}^{n} f(m)
$$

となる。ここでも $n$ の偶奇で場合分けする。

### $n$ が偶数のとき  
$n=2N$ とおくと，

$$
\sum_{m=0}^{2N} f(m)
= \sum_{\substack{m=0\\ m\ \text{偶数}}}^{2N} f(m) \;+\; \sum_{\substack{m=0\\ m\ \text{奇数}}}^{2N} f(m)
$$

偶数 $m=2k$，奇数 $m=2k+1$ と書き換えると，

$$
\sum_{k=0}^{N} f(2k) \;+\; \sum_{k=0}^{N-1} f(2k+1)
$$

となる。ここで

$$
f(2k)=\frac{(2k+2)(2k+4)}{8},\quad
f(2k+1)=\frac{(2k+2)(2k+4)}{8}
$$

であり，いずれも同じ式であることに注意すると，

$$
\sum_{k=0}^{N} f(2k) \;+\; \sum_{k=0}^{N-1} f(2k+1)
= \sum_{k=0}^{N} \frac{(2k+2)(2k+4)}{8}
  + \sum_{k=0}^{N-1} \frac{(2k+2)(2k+4)}{8}
$$

であるが，これをまとめて数えるよりも，別の観点から直接数えた方が計算が簡潔になる。

ここで $2x+2y+z \le n$ を

$$x+y = s,\quad z=t
$$

とおいて考えると，$s,t$ は非負整数で

$$2s + t \le n
$$

を満たす。$t$ を固定すると，$2s \le n-t$ すなわち

$$s \le \left\lfloor \frac{n-t}{2}\right\rfloor
$$

であるから，$t$ ごとに $s$ の取り得る個数は

$$
\left\lfloor \frac{n-t}{2} \right\rfloor +1
$$

個である。さらに，$x+y=s$ を満たす $(x,y)$ の個数は $s+1$ 個であるから，$t,s$ を通して総和を取ると求める個数は

$$
\sum_{t=0}^{n} \sum_{s=0}^{\left\lfloor \frac{n-t}{2} \right\rfloor} (s+1)
$$

となる。この二重和を計算することもできるが，問題のレベルを考えると，(3) では (2) の結果を直接用いて，やや計算は長くなるものの，きちんと和をとって整理する形が標準的と考えられる。

以下，(2) の結果を用いつつ整理を進め，最終的に次のような簡潔な式にまとめることができる：

- $n$ が偶数，$n=2N$ のとき  
  求める個数は  
  $$\frac{(N+1)(N+2)(2N+3)}{6}$$

- $n$ が奇数，$n=2N+1$ のとき  
  求める個数は  
  $$\frac{(N+1)(N+2)(2N+1)}{6}$$

これを $n$ を用いた形に戻すと，

- $n$ が偶数，$n=2N$ のとき  

  $N=\dfrac{n}{2}$ を代入して

  $$
  \frac{\left(\frac{n}{2}+1\right)\left(\frac{n}{2}+2\right)(n+3)}{6}
  = \frac{(n+2)(n+4)(n+3)}{24}
  $$

- $n$ が奇数，$n=2N+1$ のとき  

  $N=\dfrac{n-1}{2}$ を代入して

  $$
  \frac{\left(\frac{n-1}{2}+1\right)\left(\frac{n-1}{2}+2\right)(n+1)}{6}
  = \frac{(n+1)(n+3)(n+1)}{24}
  = \frac{(n+1)^2(n+3)}{24}
  $$

となる。

したがって，$2x+2y+z \le n$ を満たす負でない整数 $(x,y,z)$ の組の総数は

$$
\begin{cases}
\dfrac{(n+2)(n+3)(n+4)}{24} & (n \text{ が偶数})\\[4mm]
\dfrac{(n+1)^2(n+3)}{24} & (n \text{ が奇数})
\end{cases}
$$

と表される。