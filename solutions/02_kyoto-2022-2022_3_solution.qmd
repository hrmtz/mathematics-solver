## 解答

3つの整数
$$
n^2+2,\quad n^4+2,\quad n^6+2
$$
の最大公約数を $A_n$ とおく．

これらの最大公約数を求めるには，$n$ の偶奇などで場合分けしつつ，ユークリッドの互除法（整数の線形結合）を用いて，公約数に関する条件を整理していく．

まず，3つのうち $n^4+2$ は $(n^2+2)$ を用いて簡単に表せることに注目する．

実際，
$$
n^4+2=(n^4+4)-(2)=n^4+4-2
$$
と変形し，
$$
n^4+4=(n^2)^2+2\cdot 2^2=(n^2+2)^2-2^2=(n^2+2-2)(n^2+2+2)
$$
より，
$$
n^4+4=(n^2)(n^2+4)
$$
ではなく，ここでは次のようにみるほうがよい：

$$
n^4+2=(n^4+4)-(2)=(n^2+2)^2-2^2-2.
$$

しかし，$n^4+2$ は以下の簡単な形で $n^2+2$ と関係付けられる：

$$
n^4+2
= n^4 - (n^2+2)n^2 + (n^2+2)n^2 +2
= (n^2+2)n^2 +2 - (n^2+2)n^2 + n^4
$$

のような複雑な式変形よりも，最大公約数の観点からは次の事実が重要である：

- $n^2+2$ が $n^4+2$ を割り切るかどうかを調べる．

そこで，$n^4+2$ を $(n^2+2)$ で割った余りを調べる．

$n^4$ を $n^2+2$ で割るとき，$n^2 \equiv -2 \pmod{n^2+2}$ なので，
$$
n^4=(n^2)^2 \equiv (-2)^2=4 \pmod{n^2+2}
$$
よって
$$
n^4+2 \equiv 4+2=6 \pmod{n^2+2}.
$$
したがって，任意の整数 $n$ に対して
$$
\gcd(n^2+2,\;n^4+2)=\gcd(n^2+2,\;6)
$$
が成り立つ．

同様に $n^6+2$ に対しても，
$n^2 \equiv -2 \pmod{n^2+2}$ から
$$
n^6=(n^2)^3 \equiv (-2)^3=-8 \pmod{n^2+2}
$$
したがって
$$
n^6+2 \equiv -8+2=-6 \equiv 6 \pmod{n^2+2}.
$$
よって
$$
\gcd(n^2+2,\;n^6+2)=\gcd(n^2+2,\;6)
$$
である．

ここで，3つの数 $n^2+2,n^4+2,n^6+2$ の公約数 $d$ は，
特に $n^2+2$ の公約数であり，かつ $n^4+2,n^6+2$ の公約数である．
上で見た合同式から，$d$ は $n^2+2$ と $6$ の共通約数になるので，
$$
A_n=\gcd(n^2+2,\;n^4+2,\;n^6+2)=\gcd(n^2+2,\;6)
$$
となる．

したがって，あとは $n^2+2$ と $6$ の最大公約数を $n$ によって場合分けして求めればよい．

---

(1) $n$ が偶数のとき

$n=2k$ とおくと，
$$
n^2+2=(2k)^2+2=4k^2+2=2(2k^2+1)
$$
となる．$2k^2+1$ は整数であり，明らかに奇数である．

ここで $n^2+2$ と $6$ の共通の素因数の可能性を調べる．

- 2 で割れるか：  
  $n^2+2$ は $2(2k^2+1)$ の形なので偶数であり，2 で割れる．
  よって $\gcd(n^2+2,6)$ は少なくとも 2 を因数にもつ．

- 3 で割れるか：  
  $n=2k$ より $n^2=4k^2$ なので
  $$
  n^2+2=4k^2+2 \equiv 1\cdot k^2 +2 \equiv k^2+2 \pmod{3}
  $$
  であるが，$k \pmod{3}$ は $0,1,2$ のいずれかなので，
  $k^2 \pmod{3}$ は $0,1,1$ のいずれかである．したがって
  $$
  k^2+2 \equiv 2,0,0 \pmod{3}
  $$
  となり，$n^2+2$ が 3 で割り切れる場合と割り切れない場合がある．

実際にはより簡単に，$n$ の偶奇だけでなく $n$ を $6$ で割った余りで分類するのが自然であるが，ここではまず偶数であることから，
$\gcd(n^2+2,6)$ は $2$ もしくは $6$ のいずれかになる可能性があるとわかる．

しかし，上で求めた
$$
n^2+2 \equiv 4k^2+2 \equiv k^2+2 \pmod{3}
$$
について具体的に調べる：

- $k \equiv 0 \pmod{3}$ のとき：$k^2 \equiv 0 \pmod{3}$ より $n^2+2 \equiv 2 \pmod{3}$  
  → 3 で割れない．
- $k \equiv 1 \pmod{3}$ のとき：$k^2 \equiv 1 \pmod{3}$ より $n^2+2 \equiv 0 \pmod{3}$  
  → 3 で割れる．
- $k \equiv 2 \pmod{3}$ のとき：$k^2 \equiv 1 \pmod{3}$ より $n^2+2 \equiv 0 \pmod{3}$  
  → 3 で割れる．

したがって，$n$ 偶数の場合でも

- $k \equiv 0 \pmod{3}$，すなわち $n=2k \equiv 0 \pmod{6}$ のときは  
  $n^2+2$ は 2 で割れるが 3 では割れないので $\gcd(n^2+2,6)=2$．
- $k \equiv 1$ または $2 \pmod{3}$，すなわち $n \equiv 2$ または $4 \pmod{6}$ のときは  
  $n^2+2$ は 2 と 3 の両方で割れ，したがって 6 で割れるので $\gcd(n^2+2,6)=6$．

ゆえに $n$ が偶数の場合，
$$
A_n=\gcd(n^2+2,6)=
\begin{cases}
2 & (n \equiv 0 \pmod{6})\\
6 & (n \equiv 2,4 \pmod{6})
\end{cases}
$$
となる．

---

(2) $n$ が奇数のとき

$n=2k+1$ とおくと，
$$
n^2+2=(2k+1)^2+2=4k^2+4k+1+2=4k^2+4k+3
$$
である．ここから

- 2 で割れるか：  
  $4k^2+4k$ は明らかに 4 の倍数なので偶数であるが，そこに 3 を足しているので，
  $$
  n^2+2=4k^2+4k+3
  $$
  は奇数である．したがって 2 では割れない．

- 3 で割れるか：  
  $4k^2+4k+3$ を 3 で割った余りを求めると，
  $4\equiv 1 \pmod{3}$ より
  $$
  4k^2+4k+3 \equiv k^2+k+0 \pmod{3}
  $$
  となる．$k \pmod{3}$ は $0,1,2$ のいずれかであり，
  $k^2+k \pmod{3}$ はそれぞれ
  $$
  0+0\equiv 0,\quad 1+1\equiv 2,\quad 1+2\equiv 0\pmod{3}
  $$
  となるから，$n^2+2$ が 3 で割り切れる場合と割り切れない場合がある．

しかし，ここで重要なのは $\gcd(n^2+2,6)$ を求めることであり，
6 の素因数は 2 と 3 だけである．

- 上で見たように $n$ 奇数のとき $n^2+2$ は奇数なので，2 を公約数として持つことはない．
- 3 については，割れる場合があるが，その場合でも $\gcd(n^2+2,6)$ は $3$ か $1$ である．

例をいくつか調べると，

- $n=1$ のとき $n^2+2=3$ なので $\gcd(3,6)=3$．
- $n=3$ のとき $n^2+2=11$ なので $\gcd(11,6)=1$．
- $n=5$ のとき $n^2+2=27$ なので $\gcd(27,6)=3$．

となって，1 または 3 になりうることがわかる．

より系統的には，$n$ を 6 で割った余りで分類する．

奇数 $n$ については
$$
n \equiv 1,3,5 \pmod{6}
$$
のいずれかである．これぞれについて $n^2+2 \pmod{6}$ を求める：

- $n \equiv 1 \pmod{6}$ のとき：
  $$
  n^2 \equiv 1^2=1 \pmod{6} \quad\Rightarrow\quad n^2+2 \equiv 3 \pmod{6}
  $$
  よって $\gcd(n^2+2,6)=3$．

- $n \equiv 3 \pmod{6}$ のとき：
  $$
  n^2 \equiv 3^2=9 \equiv 3 \pmod{6} \quad\Rightarrow\quad n^2+2 \equiv 5 \pmod{6}
  $$
  $5$ は $6$ と互いに素なので $\gcd(n^2+2,6)=1$．

- $n \equiv 5 \pmod{6}$ のとき：
  $$
  n^2 \equiv 5^2=25 \equiv 1 \pmod{6} \quad\Rightarrow\quad n^2+2 \equiv 3 \pmod{6}
  $$
  よって $\gcd(n^2+2,6)=3$．

したがって $n$ が奇数のとき
$$
A_n=\gcd(n^2+2,6)=
\begin{cases}
3 & (n \equiv 1,5 \pmod{6})\\
1 & (n \equiv 3 \pmod{6})
\end{cases}
$$
となる．

---

(3) まとめ

以上より，すべての自然数 $n$（$n\ge1$）について，
$$
A_n=\gcd(n^2+2,n^4+2,n^6+2)=\gcd(n^2+2,6)
$$
であり，$n$ を $6$ で割った余りに応じて

$$
A_n=
\begin{cases}
1 & (n \equiv 3 \pmod{6})\\[4pt]
2 & (n \equiv 0 \pmod{6})\\[4pt]
3 & (n \equiv 1,5 \pmod{6})\\[4pt]
6 & (n \equiv 2,4 \pmod{6})
\end{cases}
$$

となる．