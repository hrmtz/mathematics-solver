(1)  

$n$個の整数 $2^0,2^1,\dots,2^{n-1}$ から異なる2個を選んで積をとるので，  
$a_{n,2}$ は次の和で表せる。

$$
a_{n,2}
=\sum_{0\le i<j\le n-1}2^i\cdot 2^j
=\sum_{0\le i<j\le n-1}2^{i+j}
$$

ここで，$a_{n,1}$ を先に求めると計算が簡単になる。  
1個だけ選ぶ場合は各数をそのまま足すので，

$$
a_{n,1}
=\sum_{m=0}^{n-1}2^m
=\frac{2^n-1}{2-1}
=2^n-1
$$

である（等比数列の和の公式を用いた）。

次に，  
$\displaystyle S:=\sum_{0\le i<j\le n-1}2^{i+j}$ を求めたい。  
全ての $i,j$ についての和

$$
T:=\sum_{i=0}^{n-1}\sum_{j=0}^{n-1}2^{i+j}
$$

を考えると，これは

$$
T=\left(\sum_{i=0}^{n-1}2^i\right)\left(\sum_{j=0}^{n-1}2^j\right)
=(a_{n,1})^2=(2^n-1)^2
$$

である。  
一方，$T$ は $(i<j)$，$(i=j)$，$(i>j)$ の3つの場合に分けられるので，

$$
T
=\sum_{0\le i<j\le n-1}2^{i+j}
+\sum_{i=0}^{n-1}2^{2i}
+\sum_{0\le j<i\le n-1}2^{i+j}
=2S+\sum_{i=0}^{n-1}2^{2i}
$$

となる（$i<j$ の場合と $j<i$ の場合は対称なので和は等しい）。  
したがって，

$$
(2^n-1)^2
=2S+\sum_{i=0}^{n-1}2^{2i}
$$

より，

$$
S=\frac{(2^n-1)^2-\displaystyle\sum_{i=0}^{n-1}2^{2i}}{2}
$$

である。ここで再び等比数列の和の公式を用いて

$$
\sum_{i=0}^{n-1}2^{2i}
=\sum_{i=0}^{n-1}4^i
=\frac{4^n-1}{4-1}
=\frac{4^n-1}{3}
$$

なので，

$$
S=\frac{(2^n-1)^2-\dfrac{4^n-1}{3}}{2}
=\frac{3(2^n-1)^2-(4^n-1)}{6}
$$

となる。分子を整理すると，

$$
\begin{aligned}
3(2^n-1)^2-(4^n-1)
&=3(4^n-2^{n+1}+1)-4^n+1 \\
&=3\cdot 4^n-3\cdot 2^{n+1}+3-4^n+1 \\
&=2\cdot 4^n-3\cdot 2^{n+1}+4 \\
&=2^{2n+1}-3\cdot 2^{n+1}+4 \\
&=2\bigl(2^{2n}-3\cdot 2^n+2\bigr)
\end{aligned}
$$

なので，

$$
S=\frac{2\bigl(2^{2n}-3\cdot 2^n+2\bigr)}{6}
=\frac{2^{2n}-3\cdot 2^n+2}{3}
$$

よって，

$$
a_{n,2}=\frac{2^{2n}-3\cdot 2^n+2}{3}
$$

である。


(2)  

まず，$a_{n,k}$ を $2^0,2^1,\dots,2^{n-1}$ の $k$個の積の総和として定義しているので，  
多項式

$$
f_n(x)=1+a_{n,1}x+a_{n,2}x^2+\cdots+a_{n,n}x^n
$$

は，それぞれの数 $2^m$ について「選ぶ」か「選ばない」かを区別する生成関数として

$$
f_n(x)=\prod_{m=0}^{n-1}(1+2^m x)
$$

と表される。  
（各因子 $(1+2^m x)$ の $1$ を選ぶか $2^m x$ を選ぶかで，全ての選び方の積の総和が得られる，という事実を用いた。）

同様に，

$$
f_{n+1}(x)=\prod_{m=0}^{n}(1+2^m x)
=\left(\prod_{m=0}^{n-1}(1+2^m x)\right)(1+2^n x)
=f_n(x)\,(1+2^n x)
$$

であるから，

$$
\frac{f_{n+1}(x)}{f_n(x)}=1+2^n x
$$

となる。

次に $f_n(2x)$ を考えると，

$$
\begin{aligned}
f_n(2x)
&=\prod_{m=0}^{n-1}(1+2^m\cdot 2x)
=\prod_{m=0}^{n-1}(1+2^{m+1}x) \\
&=\prod_{m=1}^{n}(1+2^{m}x)
=\frac{\displaystyle\prod_{m=0}^{n}(1+2^m x)}{1+2^0 x}
=\frac{f_{n+1}(x)}{1+x}
\end{aligned}
$$

であるから，

$$
\frac{f_{n+1}(x)}{f_n(2x)}=1+x
$$

となる。

よって，

$$
\frac{f_{n+1}(x)}{f_n(x)}=1+2^n x,\qquad
\frac{f_{n+1}(x)}{f_n(2x)}=1+x
$$

である。


(3)  

(2)で得た

$$
f_{n+1}(x)=(1+2^n x)\,f_n(x)
$$

を用いる。  
両辺を展開し，$x^{k+1}$ の係数を比較する。

左辺の $x^{k+1}$ の係数は $a_{n+1,k+1}$ である。  
右辺を展開すると，

$$
(1+2^n x)\,(a_{n,0}+a_{n,1}x+\cdots+a_{n,n}x^n)
$$

であり，$a_{n,0}=1$ とおくと，右辺の $x^{k+1}$ の係数は

- $1\cdot a_{n,k+1}x^{k+1}$ から $a_{n,k+1}$  
- $2^n x\cdot a_{n,k}x^k$ から $2^n a_{n,k}$  

を足したものなので，

$$
a_{n+1,k+1}=a_{n,k+1}+2^n a_{n,k}
$$

を得る。

ここで (1) および $f_n(x)=\prod_{m=0}^{n-1}(1+2^m x)$ の形から，  
$a_{n,k}$ は $2^0,2^1,\dots,2^{n-1}$ から $k$個選んで積をとるので，

$$
\frac{a_{n,k+1}}{a_{n,k}}
$$

を直接扱うより，(3) の式を $a_{n,k}$ で割ることを考える。  
問題は $\dfrac{a_{n+1,k+1}}{a_{n,k}}$ を $n,k$ で表せというものであるから，上の関係式をそのまま用いて，

$$
\frac{a_{n+1,k+1}}{a_{n,k}}
=\frac{a_{n,k+1}}{a_{n,k}}+2^n
$$

となる。ここで $\dfrac{a_{n,k+1}}{a_{n,k}}$ を $n,k$ で表す必要がある。

一方，$f_n(x)=\prod_{m=0}^{n-1}(1+2^m x)$ の展開における係数を，  
組合せ的に別の形で表すことを考える。  
$2^0,2^1,\dots,2^{n-1}$ から $k$個を選んで積をとると，

$$
a_{n,k}
=\sum_{0\le i_1<\cdots<i_k\le n-1}2^{i_1+\cdots+i_k}
$$

である。このままでは一般形を得にくいので，  
(3) は別の方針で求める。  
(2) で求めたもう一つの関係式

$$
f_{n+1}(x)=(1+x)\,f_n(2x)
$$

を用いると，

$$
1+a_{n+1,1}x+a_{n+1,2}x^2+\cdots
=(1+x)\bigl(1+a_{n,1}(2x)+a_{n,2}(2x)^2+\cdots\bigr)
$$

となるので，右辺の $x^{k+1}$ の係数は

$$
\text{$x$ の係数 }1\cdot \bigl[\text{$x^{k+1}$ の係数}\bigr]
+
\text{$x$ の係数 }x\cdot \bigl[\text{$x^{k}$ の係数}\bigr]
$$

からなり，

- $1\cdot$（$f_n(2x)$ の $x^{k+1}$ の係数）  
- $x\cdot$（$f_n(2x)$ の $x^{k}$ の係数）

を足したものになる。  
$f_n(2x)$ の $x^{k}$ の係数は $a_{n,k}2^k$（$x^k$ を $2^k x^k$ に置き換えているため）なので，

$$
a_{n+1,k+1}
=a_{n,k+1}2^{k+1}+a_{n,k}2^{k}
$$

となる。ここで前式

$$
a_{n+1,k+1}
=a_{n,k+1}+2^n a_{n,k}
$$

と比較すると，$a_{n,k+1}$ を消去できる。  
2つの式から $a_{n,k+1}$ を求める。

まず，

$$
a_{n+1,k+1}=a_{n,k+1}+2^n a_{n,k} \quad\cdots (A)
$$

$$
a_{n+1,k+1}=2^{k+1}a_{n,k+1}+2^{k} a_{n,k} \quad\cdots (B)
$$

とおく。(A) を (B) から引くと，

$$
0=(2^{k+1}-1)a_{n,k+1}+(2^{k}-2^n)a_{n,k}
$$

したがって，

$$
a_{n,k+1}
=\frac{(2^n-2^{k})}{2^{k+1}-1}\,a_{n,k}
$$

この式を (A) に代入すると，

$$
\begin{aligned}
a_{n+1,k+1}
&=\left(\frac{2^n-2^k}{2^{k+1}-1}\right)a_{n,k}+2^n a_{n,k} \\
&=\left(\frac{2^n-2^k}{2^{k+1}-1}+\frac{2^n(2^{k+1}-1)}{2^{k+1}-1}\right)a_{n,k} \\
&=\frac{2^n-2^k+2^n(2^{k+1}-1)}{2^{k+1}-1}\,a_{n,k}
\end{aligned}
$$

分子を整理すると，

$$
\begin{aligned}
2^n-2^k+2^n(2^{k+1}-1)
&=2^n-2^k+2^n\cdot 2^{k+1}-2^n \\
&=2^{n+k+1}-2^k
=2^k(2^{n+1}-1)
\end{aligned}
$$

よって，

$$
a_{n+1,k+1}
=\frac{2^k(2^{n+1}-1)}{2^{k+1}-1}\,a_{n,k}
$$

したがって，

$$
\frac{a_{n+1,k+1}}{a_{n,k}}
=\frac{2^k(2^{n+1}-1)}{2^{k+1}-1}
$$

となる。これが求める式である。