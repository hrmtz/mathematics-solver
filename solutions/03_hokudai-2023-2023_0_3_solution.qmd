## 解答

(1)  
$n=2$ のとき
$$
K_2=|1-a_1|+|a_1-a_2|+|a_2-6|
$$
である。$a_1,a_2$ はそれぞれ $1,2,3,4,5,6$ のいずれかなので，場合の数は $6^2=36$ 通りである。

まず，三角不等式 $|x-y|+|y-z|\ge |x-z|$ を用いると
$$
|1-a_1|+|a_1-a_2|\ge |1-a_2|,\quad |a_1-a_2|+|a_2-6|\ge |a_1-6|
$$
であるから，これらを加えて
$$
K_2\ge |1-a_2|+|a_1-6| \ge |1-6|=5
$$
よって $K_2$ の最小値は $5$ である。

さらに $K_2=5$ となる条件を調べる。  
上の不等式で等号が成り立つには

- $1,a_1,a_2$ が一直線上で同方向に並ぶ（すなわち $a_1$ が $1$ と $a_2$ の間にあるか，$a_2$ が $1$ と $a_1$ の間にある）  
- $a_1,a_2,6$ についても同様の並び

が必要である。また $|1-a_2|+|a_1-6|\ge |1-6|=5$ で等号が成り立つには，$a_1$ が $1$ と $6$ の間にあるか，$a_2$ が $1$ と $6$ の間にある必要がある。しかし $a_1,a_2$ は $1$ から $6$ の整数なので，この条件は常に満たされる。

そこで，具体的に $a_1,a_2$ の組で $K_2=5$ となるものを求める。  
$K_2=5$ として
$$
|1-a_1|+|a_1-a_2|+|a_2-6|=5
$$
が成り立つ。左辺は $1,a_1,a_2,6$ の間の移動の「総距離」を表しているから，これが $|1-6|=5$ と等しくなるには，$1,a_1,a_2,6$ が数直線上で重複や逆戻りなしに一直線上に並ばなければならない。そのためには  
$$
1\le a_1\le a_2\le 6\quad\text{または}\quad 1\le a_2\le a_1\le 6
$$
が必要十分である。

$a_1\le a_2$ の場合，$a_1$ は $1,2,3,4,5,6$，各 $a_1$ に対し $a_2$ は $a_1,a_1+1,\dots,6$ で
$$
6+5+4+3+2+1=21\ \text{通り}
$$
同様に $a_2\le a_1$ の場合も $21$ 通りであるが，$a_1=a_2$ の組 $(1,1),(2,2),\dots,(6,6)$ が重複するので，重複 $6$ 通りを引いて
$$
21+21-6=36
$$
となる。すなわち，全ての組で $K_2=5$ である。

したがって，求める確率は
$$
\frac{36}{36}=1
$$

---

(2)  
$n=3$ のとき
$$
K_3=|1-a_1|+|a_1-a_2|+|a_2-a_3|+|a_3-6|
$$
である。$a_1,a_2,a_3$ はそれぞれ $1,\dots,6$ のいずれかなので，場合の数は $6^3=216$ 通り。

(1) と同様に三角不等式を用いる：
$$
|1-a_1|+|a_1-a_2|+|a_2-a_3|+|a_3-6|
\ge |1-a_2|+|a_2-6|\ge |1-6|=5
$$
よって $K_3\ge 5$。一方，例えば $a_1=a_2=a_3=3$ とすると
$$
K_3=|1-3|+|3-3|+|3-3|+|3-6|=2+0+0+3=5
$$
となるから，$K_3$ の最小値は $5$ である。

以下，$K_3=5$ となる条件を調べる。  
上の不等式で等号が成り立つには

1. $|1-a_1|+|a_1-a_2|+|a_2-a_3|\ge |1-a_3|$ において等号  
2. $|1-a_3|+|a_3-6|\ge |1-6|$ において等号  

が同時に成り立つ必要がある。幾何的には，$1,a_1,a_2,a_3,6$ が数直線上で，折り返しや行き過ぎなしに一直線上に並ぶことが必要である。  
従って
$$
1\le a_1,a_2,a_3\le 6,\quad
1\le a_1\le a_2\le a_3\le 6\ \text{または}\ 1\le a_3\le a_2\le a_1\le 6
$$
が必要十分条件となる。

$a_1\le a_2\le a_3$ の組の数は「重複を許す順序付き 3 個の選び方」であり，
$$
{}_{6+3-1}C_3={8\choose 3}=56\ \text{通り}
$$
同様に $a_3\le a_2\le a_1$ の組も $56$ 通りである。ただし $a_1=a_2=a_3$ の 6 通りが重複して数えられているから，重複を 6 通り引いて
$$
56+56-6=106
$$
通りが $K_3=5$ となる。

したがって確率は
$$
\frac{106}{216}=\frac{53}{108}
$$

---

(3)  
一般の $n\ (\ge 2)$ について考える。
$$
K_n=|1-a_1|+|a_1-a_2|+\cdots+|a_{n-1}-a_n|+|a_n-6|
$$

まず三角不等式を $n+1$ 個の点 $1,a_1,a_2,\dots,a_n,6$ に対して繰り返し用いると
$$
|1-a_1|+|a_1-a_2|+\cdots+|a_{n-1}-a_n|+|a_n-6|\ge |1-6|=5
$$
であるから
$$
K_n\ge 5
$$
である。一方，例えば
$$
a_1=a_2=\cdots=a_n=3
$$
とすると
$$
K_n=|1-3|+\underbrace{|3-3|+\cdots+|3-3|}_{n-1\ \text{個}}+|3-6|=2+0+\cdots+0+3=5
$$
となるから，$K_n$ の最小値は
$$
q_n=5
$$
である。

次に $K_n=q_n=5$ となるための必要十分条件を求める。  
三角不等式の等号条件を考えると，$|x-y|+|y-z|=|x-z|$ となるのは，$x,y,z$ が数直線上で $y$ が $x$ と $z$ の間にあるとき（または 3 点が同一のとき）である。この事実を $1,a_1,a_2,\dots,a_n,6$ に順に適用すると，$K_n=|1-6|$ となるためには

- すべての $k$ について，$a_k$ が $1$ と $6$ を結ぶ線分上で折り返しをしないように並んでいる

ことが必要である。すなわち

- $1\le a_1\le a_2\le\cdots\le a_n\le 6$  
  または
- $1\le a_n\le a_{n-1}\le\cdots\le a_1\le 6$

が成り立つ必要がある。

逆に，これらの条件のいずれかが成り立っていれば，$1,a_1,a_2,\dots,a_n,6$ は数直線上で 1 方向に単調に進むのみであるから
$$
K_n=|1-a_1|+|a_1-a_2|+\cdots+|a_{n-1}-a_n|+|a_n-6|
=|1-6|=5
$$
となる。

よって，
$$
q_n=5
$$
であり，$K_n=q_n$ となるための $a_1,a_2,\dots,a_n$ に関する必要十分条件は

「$1\le a_1,a_2,\dots,a_n\le 6$ であり，  
$1\le a_1\le a_2\le\cdots\le a_n\le 6$ もしくは $1\le a_n\le a_{n-1}\le\cdots\le a_1\le 6$  
が成り立つこと」

である。