## 解答

(以下，$T(H_1,\dots,H_n)$ を単に $T_n$ と書くこともある．)

---

## (1)

$n$枚の平面 $H_1,\dots,H_n$ による空間の分割個数の最大値を $M_n$ とおく．  
$n$枚目の平面 $H_n$ を加えたとき，それまでの $n-1$枚の平面で分割されていた空間領域の総数を $M_{n-1}$ とし，新たに増える領域の個数を考える．

平面 $H_n$ 上では，$H_1,\dots,H_{n-1}$ との交わりによって $H_n$ がいくつかの部分（2次元領域）に分割される．  
$H_n$ の各部分に対して，その両側に 1つずつ新たな空間領域が生じるので，新たに増える空間領域の数は，「$H_n$ 上の分割領域の個数」に等しい．

よって，「$H_1,\dots,H_{n-1}$ が平面 $H_n$ 上に作る領域の最大数」を $L_{n-1}$ とすれば，
$$
M_n = M_{n-1} + L_{n-1}
$$
が成り立つ．

ここで，3次元空間内の $n-1$枚の平面が，ある 1枚の平面（= $H_n$）上に作る図形は，「平面上の $n-1$本の直線による分割」であり，そのときの最大領域数は，2次元における有名な最大分割数
$$
1 + (n-1) + \frac{(n-1)(n-2)}{2}
$$
に等しい（直線が一般の位置にあるとき）．

したがって
$$
L_{n-1}
= 1 + (n-1) + \frac{(n-1)(n-2)}{2}
= 1 + (n-1) + \frac{(n-1)(n-2)}{2}
$$
である．また，3次元空間における $M_n$ についても，一般の位置（平行な2枚の平面がなく，3枚の平面が1直線上に交わらず，4枚の平面が1点に集まらない）に置いたときに最大となることから帰納的にこの $L_{n-1}$ を用いてよい．

$n=0$枚のとき，空間は 1つの領域なので $M_0=1$ であると考えると，
$$
M_n
= M_0 + \sum_{k=1}^n L_{k-1}
= 1 + \sum_{k=1}^n \left\{ 1 + (k-1) + \frac{(k-1)(k-2)}{2} \right\}
$$
となる．ここで $m=k-1$ とおくと
$$
M_n
= 1 + \sum_{m=0}^{n-1} \left\{ 1 + m + \frac{m(m-1)}{2} \right\}
$$
となる．

右辺を整理する．
$$
\begin{aligned}
\sum_{m=0}^{n-1} 1 &= n, \\
\sum_{m=0}^{n-1} m &= \frac{(n-1)n}{2}, \\
\sum_{m=0}^{n-1} \frac{m(m-1)}{2}
&= \frac{1}{2}\left(\sum_{m=0}^{n-1} m^2 - \sum_{m=0}^{n-1} m\right) \\
&= \frac{1}{2}\left\{\frac{(n-1)n(2n-1)}{6} - \frac{(n-1)n}{2}\right\} \\
&= \frac{1}{2}\cdot \frac{(n-1)n(2n-1 - 3)}{6} \\
&= \frac{(n-1)n(n-2)}{6}.
\end{aligned}
$$

したがって
$$
\begin{aligned}
M_n
&= 1 + \left\{ n + \frac{(n-1)n}{2} + \frac{(n-1)n(n-2)}{6} \right\} \\
&= 1 + n + \frac{(n-1)n}{2} + \frac{(n-1)n(n-2)}{6}.
\end{aligned}
$$

これをさらにまとめると
$$
M_n = \frac{n^3 + 5n + 6}{6}
= \frac{(n+1)(n^2 - n + 6)}{6}
$$
となる．（因数分解の形はどちらでもよい．）

したがって，$T(H_1,\dots,H_n)$ のとりうる値のうち最大のものは
$$
\boxed{\displaystyle \frac{n^3 + 5n + 6}{6}}
$$
である．

---

## (2)

$T(H_1,\dots,H_n)$ のとりうる値のうち 2 番目に大きいものを $S_n$ とおく．  
最大値 $M_n$ は，前問の議論より，次の 3 条件をすべて満たす「一般の位置」において達成される：

1. どの 2 枚の平面も平行でない．  
2. どの 3 枚の平面も 1 直線上に交わらない．  
3. どの 4 枚の平面も 1 点に交わらない．  

ここから 2 番目に大きい値を得るためには，最大値を与える配置から「できるだけ少ない個数の領域が減るような崩し方」を考えればよい．

### 増加分の観点からの考察

$n$枚目の平面 $H_n$ を加えたとき，新たに増える領域の最大数は，(1)より
$$
L_{n-1}
= 1 + (n-1) + \frac{(n-1)(n-2)}{2}
$$
であった．

2 番目に大きい値を得るには，
- $n-1$枚まででできる領域数は最大 $M_{n-1}$ に保ち，
- ただし $H_n$ の置き方を少し崩して，$H_n$ 上の領域数を「最大から 1 つだけ減らす」

という配置を考えればよい．すなわち $H_n$ 上で，$H_1,\dots,H_{n-1}$ による分割数を $L_{n-1}-1$ に抑える形で平面を置くことができれば，
$$
S_n = M_{n-1} + (L_{n-1}-1) = M_n - 1
$$
とできる．

実際，次のように構成できる：

- $H_1,\dots,H_{n-1}$ は一般の位置に保つ．  
- $H_n$ を「ほぼ」一般の位置に置くが，ただ 1 本だけ，ある交線上で他の交線と重なる（例えば，ある 3 平面が 1 直線上に交わる）ようにして，$H_n$ 上の分割数だけを 1 減らす．  

このとき，他の部分では最大分割を保ちつつ，$H_n$ 上の領域数がちょうど 1 つ減るので，増加する領域数が $L_{n-1}-1$ となり，$M_n-1$ が実現される．

逆に，最大値 $M_n$ から 1 つだけ領域数を減らした配置より大きな値（すなわち $M_n$ 以外で $M_n$ にもっとも近い値）はありえないから，2 番目に大きい値は $M_n-1$ に等しい．

よって
$$
S_n = M_n - 1
= \frac{n^3 + 5n + 6}{6} - 1
= \frac{n^3 + 5n}{6}.
$$

したがって，$T(H_1,\dots,H_n)$ のとりうる値のうち 2 番目に大きいものは
$$
\boxed{\displaystyle \frac{n^3 + 5n}{6}}
$$
である．（$n\ge 2$）

---

## (3)

$T(H_1,\dots,H_n)$ のとりうる値のうち 3 番目に大きいものを $R_n$ とおく．  
(2) と同様の考え方で，「最大値から最小限の崩し方で，増加分を 2 だけ減らす」配置を考える．

(1) より
$$
M_n = M_{n-1} + L_{n-1}
$$
であり，$L_{n-1}$ は $H_n$ 上の最大分割数だった．したがって，

- $H_1,\dots,H_{n-1}$ は依然として一般の位置に保ち，最大 $M_{n-1}$ を達成し，
- $H_n$ の位置だけを工夫して，$H_n$ 上の領域数を「$L_{n-1}-2$」にする

ことができれば，
$$
R_n = M_{n-1} + (L_{n-1}-2) = M_n - 2
$$
が実現される．

実際，$H_n$ 上での「平面群との交線」の配置は 2 次元の「直線群」の配置に対応しているので，2 本の直線の位置関係を少しだけ特別にすることにより，最大分割から 2 つだけ領域を減らすような配置をとることができる．具体的には，

- 1 本の交線を他の交点の並びに重ねて，交点の数を 1 つ減らす（＝1つの領域が減る），
- さらに別の 1 本について同様のことをする，

などにより，$H_n$ 上の分割数を $L_{n-1}-2$ にすることができる．このとき，空間全体の分割数は $M_n-2$ となる．

次に，これより大きいが $M_n$・$M_n-1$ 以外の値が存在しないことを示す．  
$n$枚の平面に対する配置は，次の 2 通りに大別される：

1. $H_1,\dots,H_{n-1}$ の配置が最大 $M_{n-1}$ を与える場合  
2. $H_1,\dots,H_{n-1}$ の配置が最大 $M_{n-1}$ より小さい場合  

(2)より，$n-1$枚のときの最大値 $M_{n-1}$ の 1 つ下は $M_{n-1}-1$ であり，$M_{n-1}$ より 2 以上小さい値をとるとき，それを用いて $H_n$ を最もよく置いても，  
$$
\text{得られる領域数} \le (M_{n-1}-1) + L_{n-1} = M_n - 1
$$
となる（増加分は $L_{n-1}$ を超えられない）．よって

- $M_n$ より大きい値は存在しない，
- $M_n$ 未満で最大のものは $M_n-1$ であり，それは $M_{n-1}$ を用いた配置で達成されている，

同様に，$M_n-1$ の次に来る値も，$M_{n-1}$ を用いた配置で，$H_n$ 上の分割数を $L_{n-1}-2$ としたときに得られる $M_n-2$ である．

したがって，3 番目に大きい値は $M_n-2$ となる：

$$
R_n = M_n - 2
= \frac{n^3 + 5n + 6}{6} - 2
= \frac{n^3 + 5n - 6}{6}.
$$

ゆえに，$T(H_1,\dots,H_n)$ のとりうる値のうち 3 番目に大きいものは
$$
\boxed{\displaystyle \frac{n^3 + 5n - 6}{6}}
$$
である．（$n\ge 3$）