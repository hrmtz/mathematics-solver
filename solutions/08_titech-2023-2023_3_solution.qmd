## 解答

(1)  
1回の操作で得られる複素数を $w$ とおく。  
実部，虚部はそれぞれ $0,1,\sqrt3$ のうちから独立に等確率で選ばれるので，$w$ は  

- $0+0i$  
- $0+1i$  
- $0+\sqrt3 i$  
- $1+0i$  
- $1+1i$  
- $1+\sqrt3 i$  
- $\sqrt3+0i$  
- $\sqrt3+1i$  
- $\sqrt3+\sqrt3 i$  

の9通りが等確率で現れる。  
それぞれの絶対値 $|w|$ は

- $0,1,\sqrt3,1,\sqrt2,2,\sqrt3,2,\sqrt6$

となる。したがって  
$|w|=0$ の確率は $1/9$，$|w|=2$ の確率は $2/9$，その他（$1,\sqrt2,\sqrt3,\sqrt6$）の確率は $6/9$ である。

$n$ 回の操作で得られる複素数を順に $w_1,\dots,w_n$ とすると，  
$$
z_n=w_1 w_2 \cdots w_n
$$
であり，絶対値について
$$
|z_n|=|w_1|\cdots |w_n|
$$
が成り立つ。

$|z_n|<5$ でない場合は，$|z_n|\ge5$ である。  
$|w_k|\ge1$ だから，$|z_n|\ge5$ となるためには，$|w_k|=2$ のものが3個以上含まれていなければならない（$2^2=4<5$, $2^3=8\ge5$ より）。  
よって，$|z_n|\ge5$ となるのは，「$|w_k|=2$ である試行がちょうど3回以上起こる場合」に限られる。

ここで，$X$ を「$n$ 回の試行のうち $|w_k|=2$ となる回数」とすると，  
各回で $|w_k|=2$ となる確率は $2/9$ なので，$X$ はパラメータ $(n,2/9)$ の二項分布に従う。  
よって
$$
P(X=k)=\binom{n}{k}\left(\frac{2}{9}\right)^k\left(1-\frac{2}{9}\right)^{\,n-k}
=\binom{n}{k}\left(\frac{2}{9}\right)^k\left(\frac{7}{9}\right)^{\,n-k}
$$
である。

$|z_n|\ge5$ となるのは $X\ge3$ のときであるから
$$
P(|z_n|\ge5)=P(X\ge3)
=\sum_{k=3}^n \binom{n}{k}\left(\frac{2}{9}\right)^k\left(\frac{7}{9}\right)^{\,n-k}.
$$
したがって求める確率は
$$
P_n=P(|z_n|<5)=1-P(|z_n|\ge5)
$$
より
$$
P_n
=1-\sum_{k=3}^n \binom{n}{k}\left(\frac{2}{9}\right)^k\left(\frac{7}{9}\right)^{\,n-k}
=\sum_{k=0}^2 \binom{n}{k}\left(\frac{2}{9}\right)^k\left(\frac{7}{9}\right)^{\,n-k}.
$$

(2)  
1回の操作で得られる複素数を $w=a+bi$ とおく（$a,b\in\{0,1,\sqrt3\}$）。  
$w^2$ が実数である条件を調べる。

$$
w^2=(a+bi)^2=a^2-b^2+2abi
$$
であるから，$w^2$ が実数であるための必要十分条件は，虚部 $2ab$ が 0 となることである。  
したがって
$$
2ab=0\ \Longleftrightarrow\ a=0\ \text{または}\ b=0
$$
となる。

$a,b$ はそれぞれ $0,1,\sqrt3$ から独立に等確率で選ばれるので  
$a=0$ となる確率は $1/3$，$b=0$ となる確率も $1/3$。  
ゆえに
$$
P(a=0\ \text{または}\ b=0)
=P(a=0)+P(b=0)-P(a=0\ \text{かつ}\ b=0)
=\frac13+\frac13-\frac{1}{9}
=\frac59.
$$
したがって，1回の操作で得られる複素数 $w$ が $w^2$ を実数にする確率は $5/9$ であり，  
$n$ 回の試行は互いに独立なので
$$
Q_n=\left(\frac{5}{9}\right)^n
$$
となる。