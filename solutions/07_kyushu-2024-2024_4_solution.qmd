## 解答

(1)  
$x,y$ 座標が $1,2,3$ の 3 通りなので，考える格子点は $3\times 3$ 個である。  
このうち 3 点以上を通る直線を数える。

まず，縦の直線 $x=1,2,3$ はそれぞれ 3 点ずつ通るので 3 本。  
横の直線 $y=1,2,3$ も同様に 3 本。  

次に，傾き $1$ の対角線を考えると，
$$(1,1),(2,2),(3,3)$$
を通る直線が 1 本ある。

また，傾き $-1$ の対角線を考えると，
$$(1,3),(2,2),(3,1)$$
を通る直線が 1 本ある。

したがって，3 点以上を通る直線は  
縦 3 本，横 3 本，対角線 2 本で，合計
$$L(3)=3+3+2=8$$
である。

(2)  
$x,y$ 座標が $1,2,3,4$ の 4 通りなので，考える格子点は $4\times 4$ 個である。  
このうち 3 点以上を通る直線を数える。

まず，縦の直線 $x=1,2,3,4$ はそれぞれ 4 点ずつ通るので 4 本。  
横の直線 $y=1,2,3,4$ も同様に 4 本。  

次に，傾き $1$ の直線を調べる。  
点 $(1,1)$ を通る傾き $1$ の直線は，$x$ 座標が 1 から 4 まで動くとき，
$$(1,1),(2,2),(3,3),(4,4)$$
の 4 点を通るので，これで 1 本。  

さらに，$y-x=1$ を満たす点
$$(1,2),(2,3),(3,4)$$
を通る直線が 1 本，  
$y-x=2$ を満たす点
$$(1,3),(2,4)$$
は 2 点しかないので，3 点以上を通らない。  
$y-x=-1$ を満たす点
$$(2,1),(3,2),(4,3)$$
を通る直線が 1 本，  
$y-x=-2$ を満たす点
$$(3,1),(4,2)$$
は 2 点のみである。

したがって，傾き $1$ の直線で 3 点以上通るものは  
$y=x,\ y-x=1,\ y-x=-1$ の 3 本である。

同様に，傾き $-1$ の直線を調べる。  
$x+y=2$ を満たす点は $(1,1)$ のみで 1 点，  
$x+y=3$ を満たす点は $(1,2),(2,1)$ の 2 点，  
$x+y=4$ を満たす点
$$(1,3),(2,2),(3,1)$$
を通る直線が 1 本，  
$x+y=5$ を満たす点
$$(1,4),(2,3),(3,2),(4,1)$$
を通る直線が 1 本，  
$x+y=6$ を満たす点
$$(2,4),(3,3),(4,2)$$
を通る直線が 1 本，  
$x+y=7$ を満たす点は $(3,4),(4,3)$ の 2 点，  
$x+y=8$ を満たす点は $(4,4)$ の 1 点である。

したがって，傾き $-1$ の直線で 3 点以上通るものは  
$x+y=4,\ x+y=5,\ x+y=6$ の 3 本である。

以上をまとめると，3 点以上を通る直線は  
縦 4 本，横 4 本，傾き $1$ のもの 3 本，傾き $-1$ のもの 3 本で，合計
$$L(4)=4+4+3+3=14$$
である。

(3)  
$x,y$ 座標が $1,2,3,4,5$ の 5 通りなので，考える格子点は $5\times 5$ 個である。  
このうち 3 点以上を通る直線を数える。

まず，縦の直線 $x=1,2,3,4,5$ はそれぞれ 5 点ずつ通るので 5 本。  
横の直線 $y=1,2,3,4,5$ も同様に 5 本。  

次に，傾き $1$ の直線を調べる。  
$y-x=k$ とおくと，$x,y$ が $1$ 以上 $5$ 以下の整数のとき，
$$y-x=k\quad (k\ \text{は整数})$$
を満たす点を数えればよい。

$k=0$ のときは
$$(1,1),(2,2),(3,3),(4,4),(5,5)$$
の 5 点を通る直線 $y=x$ が 1 本。

$k=1$ のときは
$$(1,2),(2,3),(3,4),(4,5)$$
の 4 点を通る直線が 1 本。

$k=2$ のときは
$$(1,3),(2,4),(3,5)$$
の 3 点を通る直線が 1 本。

$k=3$ のときは
$$(1,4),(2,5)$$
の 2 点であり，3 点以上にならない。

$k=4$ のときは $(1,5)$ の 1 点である。

負の $k$ についても同様で，
$k=-1$ のとき
$$(2,1),(3,2),(4,3),(5,4)$$
の 4 点，  
$k=-2$ のとき
$$(3,1),(4,2),(5,3)$$
の 3 点，  
$k=-3$ のとき
$$(4,1),(5,2)$$
の 2 点，  
$k=-4$ のとき $(5,1)$ の 1 点となる。

したがって，傾き $1$ の直線で 3 点以上通るものは  
$k=0,1,2,-1,-2$ に対応する 5 本である。

次に，傾き $-1$ の直線を調べる。  
$x+y=s$ とおくと，$x,y$ が $1$ 以上 $5$ 以下の整数のとき，
$$x+y=s\quad (s\ \text{は整数})$$
を満たす点を数えればよい。

最小は $s=2$（点 $(1,1)$）で，最大は $s=10$（点 $(5,5)$）である。

$s=2$：$(1,1)$ の 1 点  
$s=3$：$(1,2),(2,1)$ の 2 点  
$s=4$：$(1,3),(2,2),(3,1)$ の 3 点  
$s=5$：$(1,4),(2,3),(3,2),(4,1)$ の 4 点  
$s=6$：$(1,5),(2,4),(3,3),(4,2),(5,1)$ の 5 点  
$s=7$：$(2,5),(3,4),(4,3),(5,2)$ の 4 点  
$s=8$：$(3,5),(4,4),(5,3)$ の 3 点  
$s=9$：$(4,5),(5,4)$ の 2 点  
$s=10$：$(5,5)$ の 1 点

したがって，傾き $-1$ の直線で 3 点以上通るものは  
$s=4,5,6,7,8$ に対応する 5 本である。

さらに，傾きが $1$ でも $-1$ でも $0$ でも無い直線で，3 点以上の格子点を通るものがないか調べる。

格子点を 3 点以上通る直線の傾きを $m$ とする。  
2 点 $(x_1,y_1),(x_2,y_2)$ の座標が整数であるとき，その傾きは
$$m=\frac{y_2-y_1}{x_2-x_1}$$
なので，$m$ は有理数である。分数 $\dfrac{p}{q}$ を既約分数（$p,q$ は互いに素な整数，$q\ne 0$）とすると，  
この直線上で $x$ 座標を $q$ だけ増やすと $y$ 座標は $p$ だけ増える，という性質がある。

ここで，$x,y$ が $1$ 以上 $5$ 以下の範囲に収まったまま，3 つ以上の格子点が一直線上に並ぶには，  
$x$ 座標の変化の総和の絶対値が高々 $4$ でなければならないから，
$$|q|\le 4$$
である。同様に $y$ 座標の変化の総和の絶対値も高々 $4$ なので
$$|p|\le 4$$
となる。

したがって，$m=\dfrac{p}{q}$ の候補は，$|p|\le 4, |q|\le 4$ で互いに素な整数 $p,q$ である。  
このうち，すでに調べた傾き $0,\pm 1$ 以外に，

$$
m=\pm\frac12,\ \pm\frac13,\ \pm\frac14,\ \pm\frac23,\ \pm\frac34
$$

などがある。  
これらの傾きをもつ直線が $5\times 5$ の格子内で 3 点以上の格子点を通るかを具体的に調べる。

例として $m=\dfrac12$ をとると，傾きが正なので，$x$ が 2 増えるごとに $y$ が 1 増える。  
$x$ の範囲は 1 から 5 なので，増やせる回数は高々 2 回であり，  
同一直線上の格子点の個数は高々 3 個に見えるが，実際に列挙して確かめる。

始点の格子点として $(1,1)$ を考えると，  
2 つ目は $(3,2)$，3 つ目は $(5,3)$ で，確かに 3 点が一直線上に並ぶ。  
実際の直線式は
$$y-1=\frac12(x-1)\quad \Longleftrightarrow\quad y=\frac12x+\frac12$$
である。

同様に他の始点をとった場合も調べると，$y$ 座標が整数になる点は  
$x$ が奇数のときだけであり，5×5 の範囲内で 3 点並ぶものは  
$(1,1),(3,2),(5,3)$ を通るもの 1 本に限られる。

同様に $m=-\dfrac12$ の場合も，$x$ が 2 増えるごとに $y$ が 1 減る形で調べると，  
$(1,5),(3,4),(5,3)$ を通る直線が 1 本だけ存在する。

他の傾きについても同様に調べる。  
$m=\pm \dfrac13$ の場合は，$x$ の増分 3 に対して $y$ の増分 1 なので，  
$x$ 範囲が 1 から 5 の中では  
$$1\to 4,\quad 2\to 5$$
程度しか動けず，3 点以上並べるには少なくとも 2 回以上この増分を足せなければならないが，  
$1+2\cdot 3=7>5$ となり，5×5 の範囲外に出てしまう。  
したがって，$m=\pm \dfrac13$ では 3 点以上の格子点は得られない。

同様に $m=\pm \dfrac23$ のときは $x$ 範囲が狭く，  
$m=\pm \dfrac14,\ \pm \dfrac34$ などについても，  
$x$ を増減させるごとにすぐ 5×5 の範囲外に出てしまい，  
3 点以上の格子点を含むことはない。  
（いずれも具体的に列挙すると最大 2 点しかとれない。）

したがって，傾き $0,\pm 1,\pm \dfrac12$ 以外の傾きでは 3 点以上の格子点を通る直線は存在しない。

ここまでで求めた本数をまとめる。

- 縦 5 本  
- 横 5 本  
- 傾き $1$：5 本  
- 傾き $-1$：5 本  
- 傾き $\dfrac12$：$(1,1),(3,2),(5,3)$ を通る 1 本  
- 傾き $-\dfrac12$：$(1,5),(3,4),(5,3)$ を通る 1 本  

したがって，
$$L(5)=5+5+5+5+1+1=22$$
である。

以上より，
$$(1)\ L(3)=8,\quad (2)\ L(4)=14,\quad (3)\ L(5)=22$$
となる。