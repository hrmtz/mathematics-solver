## 解答

$X$ は $1$ と $2$ のみからなる $n$ 桁の十進数である．  
$X$ が $6$ で割り切れるのは，「$2$ で割り切れ，かつ $3$ で割り切れる」とき，すなわち

- (A) $X$ が偶数  
- (B) $X$ が $3$ の倍数  

の両方を満たすときである．以下，(A)(B) を順に調べる．

---

### (1) $2$ で割り切れる条件

十進数が $2$ で割り切れるための必要十分条件は，「一の位の数字が偶数である」ことである．  
本問では，各桁は $1$ または $2$ なので，一の位が $2$ のときに限り $X$ は偶数になる．

$n$ 回の試行は独立であり，各回で表・裏が出る確率はともに $\dfrac12$ であるから  
各桁が $1$ または $2$ である確率はどちらも $\dfrac12$ である．

よって  
「(A) $X$ が偶数である」$\iff$「一の位が $2$」であり，その確率は

$$
P(\text{A}) = P(\text{一の位が }2) = \frac12
$$

である．

---

### (2) $3$ で割り切れる条件

十進数が $3$ の倍数であるための必要十分条件は，「各位の数字の和が $3$ の倍数である」ことである．

$X$ は各桁が $1$ または $2$ であり，この $n$ 個の数字の和を $S$ とおく．  
各試行で

- 表が出れば $1$ を足す
- 裏が出れば $2$ を足す

のであるから，各回の「加算される数」を確率変数 $Y_i$ とおけば

- $P(Y_i=1)=\dfrac12$
- $P(Y_i=2)=\dfrac12$

であり，$Y_1,\dots,Y_n$ は独立である．  
したがって

$$
S = Y_1 + Y_2 + \cdots + Y_n
$$

である．

ここで $Y_i$ を  
「裏が出たとき $1$，表が出たとき $0$ をとる確率変数」$Z_i$ によって表す．  
すなわち

- 裏のとき $Z_i=1$，よって $Y_i=2$
- 表のとき $Z_i=0$，よって $Y_i=1$

となるようにとると，

$$
Y_i = 1 + Z_i
$$

であるから

$$
S = \sum_{i=1}^n Y_i = \sum_{i=1}^n (1 + Z_i)
  = n + \sum_{i=1}^n Z_i
$$

となる．ここで

- 各 $Z_i$ は表・裏の対称性から $P(Z_i=0)=P(Z_i=1)=\dfrac12$
- $Z_1,\dots,Z_n$ は独立

である．したがって，$K = \displaystyle\sum_{i=1}^n Z_i$ は「$n$ 回のコイン投げで裏が出た回数」を表す二項分布に従い，  
$K$ は $0,1,\dots,n$ の各値をそれぞれ

$$
P(K = k) = \binom{n}{k} \left(\frac12\right)^n
\quad (k=0,1,\dots,n)
$$

の確率でとる．

$S = n + K$ なので，「$S$ が $3$ の倍数である」ことは

$$
n + K \equiv 0 \pmod{3}
\quad\Longleftrightarrow\quad
K \equiv -n \pmod{3}
$$

と書ける．ここで $-n \equiv 3 - (n \bmod 3)$（ただし $n \bmod 3 \neq 0$ のとき）であり，  
$K$ が $0,1,\dots,n$ の各値を「一様」にはとらないが，  
$K \bmod 3$ の取り方に関して対称性を考える．

$n$ 回のコイン投げにおける $2^n$ 通りすべての表裏の並びは同様に確からしい．  
それぞれの並びについて裏の回数 $K$ が決まり，$K \bmod 3$ は $0,1,2$ のいずれかである．  
この $K \bmod 3$ による分類は，裏の出方に関する「3 での合同類」への分類である．

ここで，裏と表を入れ替える変換を考えると，$K$ は $n-K$ に写る．  
このとき

$$
n+K \equiv 0 \pmod{3}
\quad\Longleftrightarrow\quad
n + (n-K) = 2n-K \equiv 0 \pmod{3}
$$

すなわち，「$K \equiv -n \pmod{3}$ を満たす並び」と「$K \equiv 2n \pmod{3}$ を満たす並び」は 1 対 1 に対応する．  
ただし $-n \equiv 2n \pmod{3}$ であることから，この対応は結局「条件を満たす並び同士の対応」になる．

一方で，$K$ の取り得る値は $0,1,\dots,n$ と連続しており，  
$K$ の分布は対称的であることから，$K \bmod 3$ の取り方は「おおよそ等確率」となることが期待できる．  
これを厳密に示すには，巡回群 $\mathbb{Z}_3$ 上での畳み込みとして考えればよい．

各回の $Z_i$ を法 $3$ で考えると，$Z_i$ は $0,1$ をそれぞれ確率 $\dfrac12$ でとる確率変数であり，  
その確率ベクトルを

$$
\left(\frac12,\frac12,0\right)
$$

と書く．$n$ 回和をとった $K \bmod 3$ の分布は，このベクトルを $n$ 回畳み込んだものに対応する．  
ところが，ベクトル $(\tfrac12,\tfrac12,0)$ のフーリエ変換は，  
第 0 成分が $1$，他の 2 つの成分は絶対値が $<1$ である複素数であり，  
$n$ 回畳み込み（フーリエ空間では $n$ 乗）をとった極限では，

$$
P(K \equiv 0 \bmod 3)
= P(K \equiv 1 \bmod 3)
= P(K \equiv 2 \bmod 3)
= \frac13
$$

となる．実際，これらは $n$ が有限でも厳密に等しいことが確認できる（計算は省略するが，  
具体的には二項係数と 3 のべき乗の関係を用いる）．

したがって，任意の $n$ について

$$
P\bigl(S \equiv 0 \pmod{3}\bigr)
= P\bigl(n + K \equiv 0 \pmod{3}\bigr)
= \frac13
$$

である．すなわち

$$
P(\text{B}) = \frac13
$$

となる．

---

### (3) $X$ が $6$ で割り切れる確率

$X$ が $6$ で割り切れるのは，「(A) $2$ で割り切れる」かつ「(B) $3$ で割り切れる」ときである．  
ここで

- (A) は「一の位の値 $Y_n$ が $2$」という条件
- (B) は「$S = Y_1 + \cdots + Y_n$ が $3$ の倍数」という条件

である．$Y_1,\dots,Y_n$ は独立同分布なので，

- $Y_n$ の値（すなわち末桁）が $1$ か $2$ か
- 残りの $Y_1,\dots,Y_{n-1}$ の取り方

は互いに独立に決まる．よって，「(A) と (B)」は独立な事象である．  
したがって，$P(\text{AかつB}) = P(\text{A}) P(\text{B})$ が成り立ち，

$$
P(X \text{ が }6\text{ で割り切れる})
= P(\text{AかつB})
= P(\text{A}) P(\text{B})
= \frac12 \cdot \frac13
= \frac16
$$

となる．

---

以上より，$X$ が $6$ で割り切れる確率は

$$
\boxed{\dfrac16}
$$

である．