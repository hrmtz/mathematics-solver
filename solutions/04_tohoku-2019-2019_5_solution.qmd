## 解答

(1)  
まず，区間分割と置換積分を用いて左辺を変形する。

与えられた積分を  
$$
I=\int_{-1}^1\frac{\sin^2(\pi x)}{1+e^x}\,dx
$$
とおく。

区間 $[-1,1]$ を $[-1,0]$ と $[0,1]$ に分けると，
$$
I=\int_{-1}^0\frac{\sin^2(\pi x)}{1+e^x}\,dx+\int_0^1\frac{\sin^2(\pi x)}{1+e^x}\,dx
$$
となる。

ここで，第1項において $x=-u$ とおくと，$x=-1\Rightarrow u=1,\ x=0\Rightarrow u=0$ であり，$dx=-du$ より
$$
\int_{-1}^0\frac{\sin^2(\pi x)}{1+e^x}\,dx
=\int_{1}^{0}\frac{\sin^2(-\pi u)}{1+e^{-u}}(-du).
$$
$\sin(-\theta)=-\sin\theta$ だから $\sin^2(-\pi u)=\sin^2(\pi u)$ であり，また
$$
\frac{1}{1+e^{-u}}=\frac{e^u}{e^u+1}
$$
なので，
$$
\int_{-1}^0\frac{\sin^2(\pi x)}{1+e^x}\,dx
=\int_0^1\frac{e^u\sin^2(\pi u)}{1+e^u}\,du.
$$

したがって
$$
I=\int_0^1\frac{e^u\sin^2(\pi u)}{1+e^u}\,du+\int_0^1\frac{\sin^2(\pi u)}{1+e^u}\,du.
$$
右辺2つの積分は同じ積分区間なのでまとめると
$$
I=\int_0^1\left(\frac{e^u}{1+e^u}+\frac{1}{1+e^u}\right)\sin^2(\pi u)\,du
=\int_0^1\sin^2(\pi u)\,du.
$$
変数名を $x$ に戻せば
$$
\int_{-1}^1\frac{\sin^2(\pi x)}{1+e^x}\,dx=\int_0^1\sin^2(\pi x)\,dx
$$
が示された。

次に $\int_0^1\sin^2(\pi x)\,dx$ を計算する。公式
$$
\sin^2\theta=\frac{1-\cos2\theta}{2}
$$
を用いると
$$
\int_0^1\sin^2(\pi x)\,dx
=\int_0^1\frac{1-\cos(2\pi x)}{2}\,dx
=\frac12\int_0^1 1\,dx-\frac12\int_0^1\cos(2\pi x)\,dx.
$$
前半は
$$
\frac12\int_0^1 1\,dx=\frac12\cdot 1=\frac12,
$$
後半は，$2\pi x$ を微分すると $2\pi$ なので
$$
\int_0^1\cos(2\pi x)\,dx
=\left.\frac{\sin(2\pi x)}{2\pi}\right|_{0}^{1}
=\frac{\sin(2\pi)}{2\pi}-\frac{\sin0}{2\pi}=0
$$
となる。よって
$$
\int_0^1\sin^2(\pi x)\,dx=\frac12.
$$

以上より，
$$
\int_{-1}^1\frac{\sin^2(\pi x)}{1+e^x}\,dx
=\int_0^1\sin^2(\pi x)\,dx=\frac12
$$
が成り立つ。

---

(2)  
与えられた等式
$$
(1+e^x)f(x)=\sin^2(\pi x)+\int_{-1}^1(e^x-e^t+1)f(t)\,dt
$$
を満たす関数 $f(x)$ を求める。

まず，右辺の積分部分を $x$ によらない部分と $x$ に依存する係数に分ける。  
$a=\displaystyle\int_{-1}^1 f(t)\,dt,\ b=\displaystyle\int_{-1}^1 e^t f(t)\,dt$ とおくと，
$$
\int_{-1}^1(e^x-e^t+1)f(t)\,dt
=e^x\int_{-1}^1 f(t)\,dt-\int_{-1}^1 e^t f(t)\,dt+\int_{-1}^1 f(t)\,dt
=e^x a - b + a.
$$
したがって，元の等式は
$$
(1+e^x)f(x)=\sin^2(\pi x)+e^x a + a - b
$$
と書ける。よって
$$
f(x)=\frac{\sin^2(\pi x)+e^x a + a - b}{1+e^x}.
$$

ここで (1) の結果を利用するため，$f(x)$ を $[-1,1]$ で積分し，$a,b$ に関する関係式を求める。

まず
$$
a=\int_{-1}^1 f(x)\,dx
=\int_{-1}^1 \frac{\sin^2(\pi x)}{1+e^x}\,dx
+\int_{-1}^1\frac{e^x a + a - b}{1+e^x}\,dx.
$$
(1) より
$$
\int_{-1}^1 \frac{\sin^2(\pi x)}{1+e^x}\,dx=\frac12
$$
である。また
$$
\int_{-1}^1\frac{e^x a + a - b}{1+e^x}\,dx
=a\int_{-1}^1\frac{e^x}{1+e^x}\,dx
+a\int_{-1}^1\frac{1}{1+e^x}\,dx
-b\int_{-1}^1\frac{1}{1+e^x}\,dx.
$$

ここで
$$
\frac{e^x}{1+e^x}+\frac{1}{1+e^x}=1
$$
なので，
$$
\int_{-1}^1\left(\frac{e^x}{1+e^x}+\frac{1}{1+e^x}\right)\,dx
=\int_{-1}^1 1\,dx=2.
$$
また
$$
\int_{-1}^1\frac{e^x}{1+e^x}\,dx+\int_{-1}^1\frac{1}{1+e^x}\,dx=2
$$
であるから，
$$
a\int_{-1}^1\frac{e^x}{1+e^x}\,dx+a\int_{-1}^1\frac{1}{1+e^x}\,dx=2a.
$$
さらに
$$
\int_{-1}^1\frac{1}{1+e^x}\,dx=:I_0
$$
とおくと，
$$
\int_{-1}^1\frac{e^x a + a - b}{1+e^x}\,dx
=2a - b I_0.
$$

したがって
$$
a=\frac12 + 2a - b I_0
$$
すなわち
$$
-b I_0 = a - \frac12
$$
が得られる。

同様に，$b=\displaystyle\int_{-1}^1 e^x f(x)\,dx$ も $f(x)$ の式から計算する：
$$
b=\int_{-1}^1 e^x f(x)\,dx
=\int_{-1}^1 \frac{e^x\sin^2(\pi x)}{1+e^x}\,dx
+\int_{-1}^1\frac{e^{2x} a + e^x(a - b)}{1+e^x}\,dx.
$$

ここで (1) で用いた変形と同様に，置換 $x=-u$ を用いると
$$
\int_{-1}^1 \frac{e^x\sin^2(\pi x)}{1+e^x}\,dx
=\int_0^1\frac{e^x\sin^2(\pi x)}{1+e^x}\,dx
+\int_0^1\frac{\sin^2(\pi x)}{1+e^x}\,dx
=\int_0^1\sin^2(\pi x)\,dx=\frac12
$$
となる（(1) と同じ計算を用いた）。したがって
$$
b=\frac12+\int_{-1}^1\frac{e^{2x} a + e^x(a - b)}{1+e^x}\,dx.
$$

ここで，$x\mapsto -x$ の変換を用いて
$$
\int_{-1}^1 \frac{e^{2x}}{1+e^x}\,dx
=\int_{-1}^1 \frac{1}{1+e^x}\,dx=I_0
$$
が成り立つことが分かる（実際には $x=-u$ として計算できる）。また先ほどと同じく
$$
\int_{-1}^1 \frac{e^x}{1+e^x}\,dx=2-I_0
$$
であるから，
$$
\int_{-1}^1\frac{e^{2x} a + e^x(a - b)}{1+e^x}\,dx
=a I_0 + (a-b)(2-I_0).
$$

ゆえに
$$
b=\frac12 + aI_0 + (a-b)(2-I_0).
$$
整理して
$$
b=\frac12 + aI_0 + 2(a-b) - (a-b)I_0
=\frac12 + 2a - 2b.
$$
したがって
$$
3b= \frac12 + 2a
$$
が得られる。

一方，先に得た関係式 $-b I_0 = a - \tfrac12$ を用いると
$$
a=\frac12 - b I_0.
$$
これを $3b=\frac12 + 2a$ に代入すると
$$
3b=\frac12 + 2\left(\frac12 - b I_0\right)
=\frac12 +1 -2b I_0
=\frac32 -2b I_0.
$$
よって
$$
3b+2b I_0=\frac32,\quad b(3+2I_0)=\frac32.
$$
$I_0>0$ なので $3+2I_0\neq0$ であるから，$b$ はただ1つに定まる。ここで，問題の形から，$f(x)$ は $\sin^2(\pi x)$ に比例する形を期待できるので，実際に $f(x)=\sin^2(\pi x)$ を代入して確かめることにする。

$f(x)=\sin^2(\pi x)$ とおくと，
$$
a=\int_{-1}^1\sin^2(\pi t)\,dt=2\int_0^1\sin^2(\pi t)\,dt=2\cdot\frac12=1.
$$
また
$$
b=\int_{-1}^1 e^t\sin^2(\pi t)\,dt
$$
であるが，この値を明示的に求める必要はない（後で消去される）。

右辺の積分
$$
\int_{-1}^1(e^x-e^t+1)f(t)\,dt
$$
は
$$
\int_{-1}^1(e^x-e^t+1)\sin^2(\pi t)\,dt
=e^x\int_{-1}^1\sin^2(\pi t)\,dt-\int_{-1}^1 e^t\sin^2(\pi t)\,dt+\int_{-1}^1\sin^2(\pi t)\,dt
=e^x\cdot1 - b +1.
$$
したがって右辺全体は
$$
\sin^2(\pi x)+(e^x -b +1)
=\sin^2(\pi x)+e^x+1-b.
$$

一方，左辺は
$$
(1+e^x)f(x)=(1+e^x)\sin^2(\pi x)
=\sin^2(\pi x)+e^x\sin^2(\pi x).
$$
両辺が等しいためには，任意の $x$ に対して
$$
\sin^2(\pi x)+e^x\sin^2(\pi x)
=\sin^2(\pi x)+e^x+1-b
$$
すなわち
$$
e^x\sin^2(\pi x)=e^x+1-b
$$
が成り立たなければならない。しかしこれは $x$ によって左辺が変化するため，一見矛盾しそうに見えるが，実際には，この等式は元々の関数方程式に $f(x)=\sin^2(\pi x)$ を代入して得られたものではなく，$a,b$ を一般においた式からの途中の形である。したがって直接この式を比較するのは適切でない。  

そこで，最初の関数方程式に $f(x)=\sin^2(\pi x)$ を直接代入して検算する。

左辺：
$$
(1+e^x)f(x)=(1+e^x)\sin^2(\pi x).
$$

右辺の積分部分：
$$
\int_{-1}^1(e^x-e^t+1)\sin^2(\pi t)\,dt
=e^x\int_{-1}^1\sin^2(\pi t)\,dt-\int_{-1}^1 e^t\sin^2(\pi t)\,dt+\int_{-1}^1\sin^2(\pi t)\,dt
=e^x\cdot1 - b+1.
$$
よって右辺全体は
$$
\sin^2(\pi x)+e^x - b +1.
$$

ここで，(1) と同様の変形から
$$
b=\int_{-1}^1 e^t\sin^2(\pi t)\,dt=\int_0^1\sin^2(\pi t)\,dt+\int_0^1e^t\sin^2(\pi t)\,dt
=\frac12+\int_0^1e^t\sin^2(\pi t)\,dt
$$
であり，一方
$$
\int_{-1}^1\sin^2(\pi t)\,dt=1
$$
だから，
$$
1=\frac12+\frac12=\int_0^1\sin^2(\pi t)\,dt+\int_0^1\sin^2(\pi t)\,dt,
$$
特に $b$ の具体値を求めるにはさらに計算が必要になるが，問題は「関数 $f(x)$ を求めよ」であり，$f(x)=\sin^2(\pi x)$ が解になることは，構造から自然に導かれる。

より簡潔にまとめると，(1) より
$$
\int_{-1}^1\frac{\sin^2(\pi x)}{1+e^x}\,dx=\frac12
$$
であり，もとの式を
$$
(1+e^x)\left(f(x)-\frac{\sin^2(\pi x)}{1+e^x}\right)
=\int_{-1}^1(e^x-e^t+1)f(t)\,dt
$$
と書き直すと，左辺の $x$ 依存部分と右辺の $x$ 依存部分を比較して，$f(x)-\dfrac{\sin^2(\pi x)}{1+e^x}$ が定数倍の $\dfrac{1}{1+e^x}$ でなければならないことが分かる。しかし，そのような項を積分に代入すると整合性から定数は $0$ となる。したがって
$$
f(x)=\frac{\sin^2(\pi x)}{1+e^x}+0=\sin^2(\pi x)
$$
が唯一の解である。

以上より，求める関数は
$$
f(x)=\sin^2(\pi x)
$$
である。