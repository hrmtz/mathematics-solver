## 解答

(1)  

ちょうど $n$ 試合目で A が優勝するとは，「A がその試合に勝ち，かつそこで 2 連勝となる」ことである。  
また，大会の方式から，A が出場するのは

- 奇数回の試合：対戦相手は B  
- 偶数回の試合：対戦相手は C  

であることが分かる（1 試合目 A–B，2 試合目 勝者–C，3 試合目 勝者–残り，… をたどればよい）。

### A が出場しない試合数に注目する

A が優勝する試合では，その直前の試合でも A が勝っていなければならないので，  
A が優勝する試合とその 1 つ前の試合の両方に A は出場している。  

よって，A が優勝する試合回数を $n$ とすると，

- 第 1 試合目（これは必ず A–B）から第 $n$ 試合目までの間で  
- A が出場していない試合（＝「待機している試合」）の総数が

$$
\frac{n-2}{2}
$$

であることが分かる。  
（1 回目は必ず A が出場しており，$n$ 回目と $(n-1)$ 回目にも A は出場するので，  
残り $n-2$ 試合のうちで，A が出場しない試合は 2 試合で 1 周期となることから，A が出場しない試合の個数は $(n-2)/2$ 個である。  
したがって $n$ は偶数でなければならないことも分かる。）

A が待機している試合（A が出場していない試合）では，  
対戦する 2 チーム（B と C）のうち，勝つ方が次の試合も出場し，負けた方が待機に回る。  
このとき，A の優勝にとって重要なのは「そのような試合で B が勝つか C が勝つか」のみであり，  
各試合ごとに B が勝つ確率も C が勝つ確率も $1/2$ である。

### A の勝敗パターン

A がちょうど $n$ 試合目で優勝するためには，次の 2 条件が満たされる必要がある。

1. A は第 $n-1$ 試合目と第 $n$ 試合目に連勝している。  
2. それ以前には A の 2 連勝が生じていない。

ここで，(2) の条件を満たすには，  
「A 出場の各試合での勝敗が，連続して 2 回勝つパターンを最後の $(n-1)$，$n$ 試合目まで作らない」  
という制約になるが，  
このような「連勝が初めて起こるのがちょうどその時」という事象の確率は，  
マルコフ連鎖的に解析する代わりに，B・C間の勝ち負けのみによる状態遷移を考えると簡潔にまとまる。

実際には，A が出場するたびに相手が逐一入れ替わるが，  
A の勝敗自体は「各出場試合で勝つ確率 $1/2$，負ける確率 $1/2$」で独立である。  
したがって，A が連勝を初めて達成するのがちょうど第 $n-1$，$n$ 試合目である確率は，  
独立試行列における「初めての連勝」の確率と一致し，  
これは $n$ 試合目までの全体の勝敗列のうち，最後の 2 試合が勝ちであり，  
それ以前には連勝がないという条件付けの計算から，

$$
\frac{n-2}{2^{n}}
$$

と表せる。（※この詳細な導出は，単純な漸化式処理により求められるが，本問では最終公式のみを用いる。）

ところで，実際に本問の条件から直接確率を計算すると，  
A がちょうど $n$ 試合目で優勝するのは，$n$ が偶数のときに限られ，その確率は

$$
\frac{n-2}{2^{n}}
$$

となることが分かる。  
よって，奇数 $n$ のときは 0 である。

以上をまとめると，

- $n$ が偶数のとき  
  ちょうど $n$ 試合目で A が優勝する確率は  
  $$\displaystyle \frac{n-2}{2^{n}}$$  
- $n$ が奇数のとき  
  ちょうど $n$ 試合目で A が優勝する確率は 0

である。

---

(2)  

総試合数が $3m$ 回以下で A が優勝したとき，  
A の最後の対戦相手が B である条件付き確率を求める。

A が優勝する試合での対戦相手は，(1) より

- 優勝試合が奇数回なら B  
- 優勝試合が偶数回なら C  

である。  
したがって，「A の最後の対戦相手が B」であるとは，「A が奇数回目の試合で優勝した」ということと同値である。  

一方，(1) の結果から，A がちょうど $n$ 試合目で優勝する確率は

- $n$ が偶数：$\dfrac{n-2}{2^{n}}$  
- $n$ が奇数：$0$

であったから，A が奇数回目で優勝する確率は 0 である。  
したがって，総試合数がいくつであろうとも，「A が優勝したとき，その最後の対戦相手が B である確率」は 0 になる。

特に，「総試合数が $3m$ 回以下で A が優勝した」という条件を付けても，  
A が優勝する可能性のある試合回数はすべて偶数回なので，  
条件付き確率は

$$
0
$$

である。