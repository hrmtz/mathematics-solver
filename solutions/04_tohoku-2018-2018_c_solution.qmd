## 解答

(便宜上，黒を $0$，白を $1$ とし，ひっくり返す操作は $0 \leftrightarrow 1$ の交換，すなわち「$1$ を加えて $2$ で割った余りをとる」操作（$\bmod 2$）として扱う。)

### (1)

最初は $3\times3$ の全てのマスが黒（$0$）である。  
さいころを 2 回振るとき，出目は $(a,b)$（$a,b\in\{1,2,3,4,5,6\}$）であり，全体の事象数は $6^2=36$ 通りである。

同じ列（行または縦列）を 2 回ともひっくり返すと，その列は
$$
0 \xrightarrow{\text{1回反転}} 1 \xrightarrow{\text{もう1回反転}} 0
$$
となり，元に戻る。したがって，すべての板を黒のままにするためには，

- 上・中・下のいずれかの「横の列」を 2 回，または  
- 左・中・右のいずれかの「縦の列」を 2 回

行う必要がある。  
すなわち，出目が
$$
(1,1),(2,2),(3,3),(4,4),(5,5),(6,6)
$$
のいずれかであればよい。

したがって，望ましい事象数は $6$ 通りであり，求める確率は
$$
\frac{6}{36}=\frac{1}{6}
$$
である。

### (2)

3 回の操作の後に「すべて白」（全て $1$）になっている確率を求める。  
ある 1 マスが白になっているためには，そのマスを含む列（行または縦列）が，全部で奇数回（$1$ 回または $3$ 回）反転されていなければならない。  
しかし 1 回の操作で反転されるのはその列に属する 3 マスであり，「白になっているマスの個数の偶奇（パリティ）」を考えると，

- 初期状態：白が $0$ 個（偶数個）
- 1 回操作すると：3 個だけひっくり返り，白の個数は $3$ 個（奇数個）
- 2 回目の操作ごとに，さらに $3$ 個の色が反転するので，白の個数の増減は奇数個ずつであり，白の個数の偶奇は毎回反転する。

以上から，白の個数の偶奇は，操作回数と同じく，
- 0 回操作：白の個数は偶数（0 個）
- 1 回操作：白の個数は奇数
- 2 回操作：白の個数は偶数
- 3 回操作：白の個数は奇数

というように，操作回数と同じ偶奇になる。  
今回，3 回操作後であるから，白の個数は「奇数」である。

一方，すべてが白の状態では白は $9$ 個であり，これは偶数ではなく奇数だが，「現在の状態の白の個数」は $\bmod 2$ で考えると

- 初期：白 $0$ 個（偶数）を $0$ とする，
- 操作後の白の個数の偶奇は「初期の $0$」に，行った操作回数 $3$（奇数）を足したものになる。

しかし，すべて白（$9$ 個）という状態は「白の個数が $9$ 個（奇数）」であり，3 回操作後の奇数個と矛盾はないように見えるので，もう少し詳しく考える。

#### 別の見方（各マスの反転回数で考える）

あるマスが 3 回の操作で白になるためには，「そのマスを含む列が 1 回または 3 回反転される」必要がある。  
しかし，今は 3 回しか操作しないから，ある列が 3 回反転されるには「全てその列を 3 回選ぶ」しかない。その場合，その列の 3 マスだけが白となり，他の 6 マスは黒のままであり，全て白にはならない。

したがって，「各マスが 1 回だけ反転される」というしか全て白にはなりえない。  
3 回の操作でひっくり返されるマスは，各回 3 マスなので，合計で $3\times3=9$ マス分の「反転」が行われる。  
全てのマスを 1 回ずつ反転させたいので，9 個のマスがそれぞれ 1 回ずつ反転されることになるが，これは「3 回の操作で反転される 3 個ずつのマスが，互いに重なりなく，合計でちょうど 9 マスを 1 回ずつ覆う」ことを意味する。

しかし，このような 3 本の列（行・縦列）を選ぶと，少なくともあるマスが 2 回以上含まれてしまうことを確かめる：

- 行どうし（例えば「上」「中」「下」）を 3 本選べば，同じマスは含まれないが，操作回数は 3 回なので，ちょうどそれで終わりになる。しかしこれでは 9 マスすべてが 1 回ずつ反転されるが「3 回とも横列」であり，実際には  
  - 初期：全て黒  
  - 「上」1 回 → 上段のみ白  
  - 「中」1 回 → 上段と中段が白  
  - 「下」1 回 → 全段が白  
  となって，全て白になる。  
一見すると可能に見えるが，これは「3 回の操作全てが横列」であることに対応し，さいころの出目としては $(1,2,3)$ やその順列が該当するように思える。

ここで，上の考察が正しいかどうか，実際の盤面で検証する。

- 初期状態：全て黒（$0$）
- 1 回目に「上の横列（出目 1）」を反転すると，上段 3 マスだけ白（$1$）になる。
- 2 回目に「中央の横列（出目 2）」を反転すると，中段 3 マスが黒→白となり，上段 3 マスはそのまま白なので，上・中の 6 マスが白，下段 3 マスが黒。
- 3 回目に「下の横列（出目 3）」を反転すると，下段 3 マスが黒→白となり，全ての 9 マスが白となる。

したがって，3 回振った後に全てが白になることは「可能」である。

ゆえに，上で述べた「偶奇だけで不可能と結論してしまう」は誤りであり，実際にどんな出目の組が全白になるかを列挙する必要がある。

#### 出目の列による列挙

全てを白にするには，各マスが 1 回だけ反転される必要があることは先と同様である。  
初期黒 $0$ から 3 回の $\bmod 2$ の反転で 1 にするには，そのマスは 1 回だけ反転されなければならないからである。

どの列（行・縦列）の 3 本を選べば「9 マス全てが 1 回ずつ反転される」かを考える。  
操作に用いる 3 回分の列を，重なり（同じマスを同じ列の交点として数える）なく 9 マスに割り当てるには，

- 「上の横列，中の横列，下の横列」の 3 本（行 3 本）
- 「左の縦列，中の縦列，右の縦列」の 3 本（列 3 本）

の 2 通りの選び方しかない。  
（行 2 本＋列 1 本，あるいは行 1 本＋列 2 本を選ぶと，その交点が 2 回反転されるマスが生じるため，1 回だけ反転という条件を満たさない。）

よって，

1. 「上・中・下」の横 3 列を，順番は任意で 3 回振る場合  
   出目の集合としては $\{1,2,3\}$ をちょうど 1 回ずつ出すことに対応する。  
   その出方の順序の数は $3!=6$ 通り。

2. 「左・中・右」の縦 3 列を，順番は任意で 3 回振る場合  
   出目の集合としては $\{4,5,6\}$ をちょうど 1 回ずつ出すことに対応する。  
   こちらも順序は $3!=6$ 通り。

したがって，望ましい事象数は $6+6=12$ 通りであり，全事象数 $6^3=216$ 通りなので，求める確率は
$$
\frac{12}{216}=\frac{1}{18}
$$
である。

### (3)

4 回振ったときに，下図のような状態（例えば，問題文の図で「ある特定の 3 マスだけ白，他は黒」といった形）になっている確率を求める。

問題文の図を確認すると，「中央のマスだけが白，他の 8 マスは黒」という配置（十字型ではなく 1 個だけ白）であることがわかる，など，実際には図の形から白マスの位置が読み取れる。  
以下では，その配置を  

- 例として「中央のマスのみ白」（他は黒）であったと仮定して説明するが，実際の図のパターンに応じて同様の手順で計算ができる。

（※本来は実際の図を見て白・黒の配置を正確に解析する必要があるが，ここでは問題文の画像が手元にないため，一般的な方法だけ示す。）

#### 一般的な解法の手順（概要）

1. 各マスに対して「どの操作（どの目が出たとき）で反転されるか」を一覧にする。  
   例えば，上段中央のマスは
   - 出目 1（上の横列）
   - 出目 5（中央の縦列）
   の 2 種類の操作で反転される，など。

2. 4 回の操作で，目的とする最終状態（そのマスが白か黒か）を得るために，各マスが「何回反転されねばならないか」（$\bmod 2$ で 0 回か 1 回か）を考える。  
   初期は全て黒（0）なので，
   - 白になっているマス：そのマスを含む列の反転回数の総和は奇数回
   - 黒のままのマス：同総和は偶数回

3. これを，各出目（1〜6）ごとの「使われた回数」（0〜4 回）の条件として書き換え，  
   4 回振るので，6 種類の出目の出現回数 $x_1,\dots,x_6$ に対して
   $$
   x_1+x_2+x_3+x_4+x_5+x_6=4
   $$
   かつ，各マスごとに
   $$
   \text{（そのマスに対応する }x_i\text{ の和）}\equiv
   \begin{cases}
   1 & (\text{白のマス})\\
   0 & (\text{黒のマス})
   \end{cases}
   \pmod 2
   $$
   という連立一次方程式（$\bmod 2$）を立てる。

4. これを $\bmod 2$ の線形代数として解き，可能な $(x_1,\dots,x_6)$ の組み合わせを求める。  
   そのうえで，「各 $x_i$ の組を実際にどの順番で出目として並べられるか」の順列数を数える。

5. すべての解 $(x_1,\dots,x_6)$ の場合を合計して，望ましい事象数を求め，  
   全体の $6^4=1296$ 通りで割れば確率が求まる。

#### 結論

上記の通り，(3) は実際の図の白黒配置をもとに，$\bmod 2$ の連立方程式を解いて出目の組を数え上げる問題である。  
しかし，ここでは問題文に添付された最終図形がテキストから厳密に読み取れないため，具体的な数値としての確率は算出できない。

従って，この場では (1)，(2) に対する解答のみを確定させる。

- (1) の答え：$\displaystyle \frac{1}{6}$
- (2) の答え：$\displaystyle \frac{1}{18}$